"use strict";function _classCallCheck(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(n){if(Array.isArray(n)){for(var r=0,t=Array(n.length);r<n.length;r++)t[r]=n[r];return t}return Array.from(n)}var _createClass=function(){function n(n,r){for(var t=0;t<r.length;t++){var e=r[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(r,t,e){return t&&n(r.prototype,t),e&&n(r,e),r}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};!function(n){function r(n){return this instanceof r?void(this.__value__=[n]):new r(n)}function t(){}function e(n){var r=Object.create;return r?r(n):n.__proto__?{__proto__:n}:(t.prototype=n,new t)}function i(n,r){return n.prototype=e(r.prototype),n}var u=this;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports.limit=r):n.limit=r;var a=Object.prototype,o=Array.prototype,c=String.prototype,f=Function.prototype;r.limitFixed=!1,r.logClosed=!1;var s=Object.defineProperty,l=Object.is,m=Object.assign,g=Object.keys,p=Object.values,d=Object.entries,v=Object.getOwnPropertyNames,h=a.toString,y=a.hasOwnProperty,x=(a.valueOf,Array.from),w=Array.of,A=o.concat,S=o.push,b=o.slice,N=o.unshift,F=o.splice,k=o.join,_=o.pop,O=o.reverse,P=o.shift,j=o.sort,I=o.forEach,L=o.map,M=o.filter,D=o.some,C=o.every,V=o.indexOf,E=o.lastIndexOf,W=o.reduce,T=o.reduceRight,H=o.find,R=o.findIndex,U=o.fill,B=o.copyWithin,J=String.fromCodePoint,$=c.trim,z=c.codePointAt,K=c.startsWith,Y=c.endsWith,q=c.repeat,G=c.padStart,Q=c.padEnd,X=f.bind,Z=JSON.parse,nr=JSON.stringify,rr=function(n){return n},tr=function(){for(var n=arguments.length,r=Array(n),t=0;n>t;t++)r[t]=arguments[t];return r},er=function(){},ir={},ur=function(){var n=arguments.length<=0||void 0===arguments[0]?ir:arguments[0],r=arguments.length<=1||void 0===arguments[1]?"":arguments[1],t=arguments[2];return void 0===n[r]?t:n[r]},ar=function Kr(n){var t=arguments.length<=1||void 0===arguments[1]?ir:arguments[1],e=void 0,i=void 0,u=void 0,a=void 0,c=void 0,f=n.split(",");return n=f.shift(),void 0===t.value?(e=ur(t,"priority",tr),i=ur(t,"fixed",rr),u=ur(t,"when",er),a=ur(t,"format",tr),c=function(){var n=A.call(o,a.apply(void 0,arguments));return!r.limitFixed&&u.apply(void 0,_toConsumableArray(n))?e.apply(void 0,_toConsumableArray(n)):i.apply(void 0,_toConsumableArray(n))}):c=t.value,"function"==typeof c&&(c.toString=function(){return"function () { [native code] }"}),s(r,n,{value:c,writable:!1,enumerable:!0,configurable:!1}),f.length?Kr(f.join(","),t):c};ar("K",{value:rr}),ar("F",{value:tr}),ar("V",{value:"2.1.6"}),ar("getProp",{value:ur});var or={log:"background:#333;",error:"background:#F00;",info:"background:#4d90fe;",warn:"background:#F70;"},cr={toString:function(n,t){return r.message("warn",n,"change into",t)},toNumber:function(n){return r.message("warn",n,"change into","NaN")},toArray:function(n){return r.message("warn",n,"change into []")},finiteNum:function(n){return r.message("warn",n,"is not a finite Number")},formatDate:function(){return r.message("warn","timestamp:",timestamp,"date:",date,"limit.formatDate is called")},bind:function(){return r.message("warn",fun,"type is not function, limit.bind is called")}};ar("message",{value:function(){if(!r.logClosed){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];var u=e.shift(),a=console||ir,o=void 0,c=n.chrome;r.contains(["error","log","warn","info"],u)||(e.unshift(u),u="error"),o=a[u]||rr;try{c&&e.unshift(or[u]+"color:#FFF;padding-left:3px;border-radius:3px;"),e.unshift((c?"%c":"")+u.slice(0,3)+":"),o.apply(a,e)}catch(f){o("日志 ",e)}}}}),ar("err",{value:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];mr(["err["+r.formatDate()+"]"].concat(t)),r.message.apply(r,["error"].concat(t))}}),ar("war",{value:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];mr(["war["+r.formatDate()+"]"].concat(t)),r.message.apply(r,["warn"].concat(t))}}),ar("inf",{value:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];mr(["inf["+r.formatDate()+"]"].concat(t)),r.message.apply(r,["info"].concat(t))}}),ar("log",{value:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];r.message.apply(r,["log"].concat(t))}});var fr=/limitLog(\d+\.\d+)/,sr=n.localStorage,lr=function(){sr&&!function(){var n=r.formatDate((new Date).getTime(),"yyyyMMdd.HH");r.forin(sr,function(t,e){fr.test(e)&&r["?"](n+" - "+RegExp.$1)>1&&localStorage.removeItem(e)})}()},mr=function(n){if(sr){var t=r.formatDate((new Date).getTime(),"yyyyMMdd.HH"),e="limitLog"+t,i=sr.getItem(e)||"";sr.setItem(e,""+i+n+"\n")}};ar("isElement",{value:function(n){return!!n&&1===n.nodeType}}),ar("isDocument",{value:function(n){return!!n&&9===n.nodeType}}),ar("isWin",{value:function(n){return!!n&&n.window===n&&n.self==n}}),ar("isUndefined",{value:function(n){return void 0===n}}),ar("isDefined",{value:function(n){return!r.isUndefined(n)}}),ar("isNull",{value:function(n){return null===n}}),ar("isFunction",{value:function(n){return"function"==typeof n}}),ar("isBoolean",{value:function(n){return n===!0||n===!1||"[object Boolean]"===h.call(n)}}),"String,Number,Array,Date,RegExp,Error,Math".replace(/\w+/g,function(n){return ar("is"+n,{value:function(r){return h.call(r)==="[object "+n+"]"}})}),ar("isObject",{value:function(n){return r.isFunction(n)||"object"===("undefined"==typeof n?"undefined":_typeof(n))&&!!n}}),ar("isObjectSuper",{value:function(n){return"[object Object]"===h.call(n)&&""+n=="[object Object]"}}),ar("isArguments",{value:function(n){return r.has(n,"callee")}}),ar("isArrayLike",{value:function(n){return!!n&&r.isNumber(n.length)&&!r.isFunction(n)&&!r.isWin(n)}}),ar("isNaN",{when:function(){return!!Number.isNaN},priority:function(){return Number.isNaN.apply(Number,arguments)},fixed:function(n){return r.isNumber(n)&&isNaN(n)}}),ar("isFinite",{when:function(){return!!Number.isFinite},priority:function(){return Number.isFinite.apply(Number,arguments)},fixed:function(n){return r.isNumber(n)&&isFinite(n)}}),ar("isInteger",{when:function(){return!!Number.isInteger},priority:function(){return Number.isInteger.apply(Number,arguments)},fixed:function(n){return r.isFinite(n)&&Math.floor(n)===n}}),ar("isSafeInteger",{when:function(){return!!Number.isSafeInteger},priority:function(){return Number.isSafeInteger.apply(Number,arguments)},fixed:function(n){return r.isInteger(n)&&n>-9007199254740992&&9007199254740992>n}}),ar("isEmpty",{value:function(n){return null==n?!0:r.isFunction(n)?!1:r.isArrayLike(n)||r.isObject(r.valueOf(n))?0===r.size(n):!1}});var gr=function(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;r>e;e++)t[e-1]=arguments[e];return null==n?[{}].concat(t):[n].concat(t)},pr=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return[r.toArray(n)].concat(e)},dr=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return[r.toString(n)].concat(e)},vr=function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return[r.toNumber(n)].concat(e)},hr=function(n,t){for(var e=arguments.length,i=Array(e>2?e-2:0),u=2;e>u;u++)i[u-2]=arguments[u];return gr.apply(void 0,[n,r.cb(t)].concat(i))},yr=function(n,t){for(var e=arguments.length,i=Array(e>2?e-2:0),u=2;e>u;u++)i[u-2]=arguments[u];return pr.apply(void 0,[n,r.cb(t)].concat(i))},xr=function(n,t){return t=r.parseInt(t),n=r.parseInt(n),0>t&&(t=n+t,0>t&&(t=0)),t},wr=function(n){return n=r.parseInt(n),0>n?0:n},Ar=function(n,t){return[r.toString(n),wr(t)]},Sr=function(n,t,e){return e=r.toString(e),[r.toString(n),wr(t),e?e:" "]},br=function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return r.every(r.flatten(t),function(n){var t=r.isFinite(n);return t||cr.finiteNum(n),t})},Nr=function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return r.flatten(t)},Fr=[0,0,0];ar("getUid",{value:function(){for(var n=Fr.length,r=void 0;n--;)if(r=Fr[n],9===r&&(Fr[n]=0),9>r)return Fr[n]++,Fr.join(".");return Fr.unshift(1),Fr.join(".")}}),ar("_loop",{value:function(n,t,e,i,u){for(var a=r._getLoopKey(n),o=void 0,c=r.parseInt(u),f=a.length;f>c&&(o=a[c],t.call(e,n[o],o,n)!==!1||!i);c++);}}),ar("_getLoopKey",{value:function(n){return r.keys(r.isArrayLike(n)?r.toArray(n):n)}}),ar("has",{format:gr,fixed:function(n,r){return y.call(n,r)}}),ar("cb",{value:function(n){return r.isFunction(n)?n:rr}}),ar("forin",{format:hr,fixed:function(n,r,t){for(var e in n)r.call(t,n[e],e,n)}}),ar("each",{format:hr,when:function(n){return isArrayLike(n)&&I},priority:function(n,r,t){return I.call(n,function(n,t){r.call(u,n,""+t)},t)},value:function(n,t,e){return r._loop(n,t,e)}}),ar("is",{when:function(){return!!l},priority:function(){return l.apply(void 0,arguments)},fixed:function(n,t){return r.isNaN(n)&&r.isNaN(t)?!0:0===n&&0===t?1/n===1/t:n===t}}),ar("assign",{when:function(){return!!m},priority:function(){return m.apply(void 0,arguments)},format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.each(t,function(r,t){n[t]=r})}),n}}),ar("values",{when:function(){return!!p},priority:function(){return p.apply(void 0,arguments)},format:gr,fixed:function(n){var t=[];return r.each(n,function(n){t.push(n)}),t}}),ar("entries",{when:function(){return!!d},priority:function(){return d.apply(void 0,arguments)},format:gr,fixed:function(n){var t=[];return r.each(n,function(n,r){t.push([r,n])}),t}});var kr=function(n){var t=[];return r.forin(n,function(e,i){return r.has(n,i)&&t.push(i)}),t};ar("keys",{when:function(){return!!g},priority:function(){try{return g.apply(void 0,arguments)}catch(n){return kr.apply(void 0,arguments)}},format:gr,fixed:kr}),ar("keysSuper",{format:gr,fixed:function(n){return v?v(n):kr(n)}}),ar("assignSuper",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.each(t,function(t,e){r.isDefined(t)&&(n[e]=t)})}),n}}),ar("assignLazy",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.each(t,function(t,e){r.isDefined(t)&&r.isUndefined(n[e])&&(n[e]=t)})}),n}}),ar("extend",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.forin(t,function(r,t){n[t]=r})}),n}}),ar("extendSuper",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.forin(t,function(t,e){r.isDefined(t)&&(n[e]=t)})}),n}}),ar("extendLazy",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.forin(t,function(t,e){r.isDefined(t)&&r.isUndefined(n[e])&&(n[e]=t)})}),n}}),ar("getValueInObject",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.some(e,function(r){try{n=n[r]}catch(t){return n=void 0,!0}}),n}}),ar("size",{value:function(n){return r._getLoopKey(n).length}}),ar("stack",{format:gr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return r.each(e,function(t){r.each(n,function(e,i){var u=t[i];r.isDefined(u)&&(n[i]=u)})}),n}});var _r=function(n){for(var r=[],t=0;t<n.length;t++)r[t]=n[t];return r};ar("toArray",{value:function(n){var t=[];if(r.isArray(n))return S.apply(t,n),t;if(r.isArrayLike(n)){var e=void 0;try{e=b.call(n)}catch(i){e=_r(n)}return S.apply(t,e),t}return cr.toArray(n),t}}),ar("contains",{value:function(n,t){return r.some(n,function(n){return r.is(n,t)})}}),ar("flatten",{value:function Yr(){for(var Yr=[],n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return r.forEach(t,function(n){S.apply(Yr,r.isArray(n)?r.flatten.apply(void 0,A.apply(o,n)):[n])}),Yr}}),ar("union",{format:pr,fixed:function(n){var t=[];return r.filter(n,function(n){return!r.contains(t,n)&&(t.push(n),!0)})}});var Or=function(n,t){return r.some(n,function(n){return r.every(n,function(n,e){return r.is(n,t[e])})})};ar("whiteList",{format:pr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return e=r.flatten(e),r.filter(n,function(n){return Or(e,n)})}}),ar("blackList",{format:pr,fixed:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return e=r.flatten(e),r.filter(n,function(n){return!Or(e,n)})}}),ar("difference",{value:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return e=r.flatten(e),r.filter(n,function(n){return!r.contains(e,n)})}}),ar("remove",{format:gr,fixed:function(n,t,e){var i=r.indexOfSuper(n,t,e);if(-1!==i)try{return r.isArray(n)?n.splice(i,1):delete n[i],!0}catch(u){try{return n[i]=void 0,!0}catch(a){r.err(u,a)}}return!1}}),ar("removeAll",{value:function(n,t){return r.remove(n,t)?r.removeAll(n,t):n}}),ar("first",{format:gr,when:function(n){return r.isArrayLike(n)},priority:function(n){return n[0]},fixed:function(n){var t=r.keys(n);return n[t[0]]}}),ar("last",{format:gr,when:function(n){return r.isArrayLike(n)},priority:function(n){return n[n.length-1]},fixed:function(n){var t=r.keys(n);return n[t[t.length-1]]}}),ar("push",{format:pr,fixed:function(){return Function.call.apply(S,arguments),arguments[0]}}),ar("pop",{format:pr,fixed:function(){return Function.call.apply(_,arguments),arguments[0]}}),ar("unshift",{format:pr,fixed:function(){return Function.call.apply(N,arguments),arguments[0]}}),ar("shift",{format:pr,fixed:function(){return Function.call.apply(P,arguments),arguments[0]}}),ar("reverse",{format:pr,fixed:function(){return Function.call.apply(O,arguments)}}),ar("sort",{format:pr,fixed:function(){return Function.call.apply(j,arguments)}}),ar("splice",{format:pr,fixed:function(){return Function.call.apply(F,arguments),arguments[0]}}),ar("join",{format:pr,fixed:function(){return Function.call.apply(k,arguments)}}),ar("concat",{format:pr,fixed:function(){return Function.call.apply(A,arguments)}}),ar("slice",{format:pr,fixed:function(){return Function.call.apply(b,arguments)}}),ar("forEach",{format:hr,when:function(n){return I&&n.forEach===I},priority:function(){return Function.call.apply(I,arguments)},fixed:function(n,t,e){return r.isArrayLike(n)?r.each(n,function(r,i){t.call(e,r,+i,n)},e):r.each(n,t,e)}}),ar("map",{format:hr,when:function(n){return L&&n.map===L},priority:function(){return Function.call.apply(L,arguments)},fixed:function(n,t,e){var i=r.isArrayLike(n)?[]:{};return r.each(n,function(r,e){i[e]=t.call(this,r,e,n)},e),i}}),ar("filter",{format:hr,when:function(n){return M&&n.filter===M},priority:function(){return Function.call.apply(M,arguments)},fixed:function(n,t,e){var i=r.isArrayLike(n),u=i?[]:{};return i?r.each(n,function(r,e){t.call(this,r,e,n)&&u.push(r)},e):r.each(n,function(r,e){t.call(this,r,e,n)&&(u[e]=r)}),u}}),ar("some",{format:hr,when:function(n){return D&&n.some===D},priority:function(){return Function.call.apply(D,arguments)},fixed:function(n,t,e){var i=!1;return r.isArrayLike(n)?r._loop(n,function(r,u){return t.call(e,r,+u,n)?(i=!0,!1):void 0},void 0,!0):r._loop(n,function(r,u){return t.call(e,r,u,n)?(i=!0,!1):void 0},void 0,!0),i}}),ar("every",{format:hr,when:function(n){return C&&n.every===C},priority:function(){return Function.call.apply(C,arguments)},fixed:function(n,t,e){var i=!0;return r.isArrayLike(n)?r._loop(n,function(r,u){return t.call(e,r,+u,n)?void 0:i=!1},void 0,!0):r._loop(n,function(r,u){return t.call(e,r,u,n)?void 0:i=!1},void 0,!0),i}}),ar("indexOf",{format:gr,when:function(n){return V&&n.indexOf===V},priority:function(){return Function.call.apply(V,arguments)},fixed:function(n,t,e){var i=-1;return r._loop(n,function(n,r){return n===t?(i=r,!1):void 0},void 0,!0,xr(n.length,e)),r.isArrayLike(n)?+i:i}}),ar("indexOfSuper",{format:gr,fixed:function(n,t,e){var i=-1;return r._loop(n,function(n,e){return r.is(n,t)?(i=e,!1):void 0},void 0,!0,xr(n.length,e)),r.isArrayLike(n)?+i:i}}),ar("lastIndexOf",{format:pr,when:function(n){return E&&n.lastIndexOf===E},priority:function(){return Function.call.apply(E,arguments)},fixed:function(n,t,e){e=r.parseInt(e);var i=n.length-1,u=r.indexOf(n.reverse(),t,3===arguments.length?i-e:e);return-1===u?-1:i-u}});var Pr=new TypeError("Reduce of empty array with no initial value");ar("reduce",{format:yr,when:function(n){return W&&n.reduce===W},priority:function(){return Function.call.apply(W,arguments)},fixed:function(n,t,e){var i=arguments.length,u=0,a=2===i,o=a?n[u++]:e;if(a&&0===n.length)throw Pr;return r._loop(n,function(r,e){o=t.call(this,o,r,+e,n)},void 0,!1,u),o}}),ar("reduceRight",{format:yr,when:function(n){return T&&n.reduceRight===T},priority:function(){return Function.call.apply(T,arguments)},fixed:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var i=t[0].length-1,u=t[1];return t[0].reverse(),t[1]=function(n,r,t,e){return u(n,r,i-t,e)},r.reduce.apply(r,t)}}),ar("from",{format:hr,when:function(){return!!x},priority:function(){return x.apply(void 0,arguments)},fixed:function(n,t,e){var i=[];return n&&n.length?(S.apply(i,b.call(n)),r.map(i,t,e)):i}}),ar("of",{when:function(){return!!w},priority:function(){return w.apply(void 0,arguments)},fixed:function(){for(var n=arguments.length,r=Array(n),t=0;n>t;t++)r[t]=arguments[t];return b.call(r)}}),ar("find",{format:hr,when:function(n){return H&&n.find===H},priority:function(){return Function.call.apply(H,arguments)},fixed:function(n,t){var e=void 0;return r.some(n,function(n,r,i){return t(n,r,i)?(e=n,!0):void 0}),e}}),ar("findIndex",{format:hr,when:function(n){return R&&n.findIndex===R},priority:function(){return Function.call.apply(R,arguments)},fixed:function(n,t){var e=-1;return r.some(n,function(n,r,i){return t(n,r,i)?(e=r,!0):void 0}),e}}),ar("fill",{format:pr,when:function(n){return U&&n.fill===U},priority:function(){return Function.call.apply(U,arguments)},fixed:function(n,t,e,i){var u=n.length;e=r.parseInt(e),i=r.parseInt(i),e=0>e?u+e:e,i=0>=i?u+i:i,0>e&&(e=0),i>u&&(i=u);var a=i-e;if(a>0){var o=r.from(new Array(a),function(){return t});N.call(o,e,a),F.apply(n,o)}return n}}),ar("includes",{when:function(n){return!!n.includes},priority:function(n,r,t){return n.includes(r,t)},fixed:function(n,t,e){if(r.isString(n))return-1!==n.indexOf(t,e);if(r.isNaN(t)){var i=!1;return r._loop(n,function(n){return r.isNaN(n)?(i=!0,!1):void 0},void 0,!0,xr(n.length,e)),i}return-1!==r.indexOf(n,t,e)}}),ar("copyWithin",{format:pr,when:function(n){return B&&n.copyWithin===B},priority:function(){return Function.call.apply(B,arguments)},fixed:function(n,r,t,e){var i=n.slice(t,e);return i.unshift(r,i.length),F.apply(n,i),n}});var jr=function(){function n(){var t=this;if(_classCallCheck(this,n),this.PromiseStatus="pedding",this.PromiseValue=void 0,this.Stack=[],r.isFunction(arguments.length<=0?void 0:arguments[0])){this.promiseList=[];var e=arguments.length<=0?void 0:arguments[0],i=function(n){r.each([t].concat(t.promiseList),function(r){"pedding"===r.PromiseStatus&&(r.PromiseStatus="resolved",r.PromiseValue=n,r.cleanStack())})},u=function(n){r.each([t].concat(t.promiseList),function(r){"pedding"===r.PromiseStatus&&(r.PromiseStatus="rejected",r.PromiseValue=n,r.cleanStack())}),setTimeout(function(){if(!t.promiseList.length)throw"(in promise) "+n},0)};try{e(i,u)}catch(a){this.PromiseStatus="rejected",this.PromiseValue=a}}else this.PromiseStatus=arguments.length<=0?void 0:arguments[0],this.PromiseValue=arguments.length<=1?void 0:arguments[1]}return _createClass(n,[{key:"then",value:function(r,t){var e=this;if(e.promiseList){var i=e;e=new n(e.PromiseStatus,e.PromiseValue),i.promiseList.push(e)}return e.Stack.push({suc:r,err:t}),"pedding"===e.PromiseStatus||e.cleanStatus||e.cleanStack(),e}},{key:"errorBack",value:function(){var n=this;return n.Stack.length?n.cleanStack():setTimeout(function(){throw"(in promise) "+n.PromiseValue},0)}},{key:"successBack",value:function(){var n=this,r=n.PromiseValue;return r&&r.then?void r.then(function(r){n.PromiseValue=r,n.PromiseStatus="resolved"},function(r){n.PromiseValue=r,n.PromiseStatus="rejected"}).then(function(){n.cleanStack()}):n.cleanStack()}},{key:"cleanStack",value:function(){var n=this,r=n.Stack.shift();n.cleanStatus="init",r?setTimeout(function(){try{switch(n.PromiseStatus){case"resolved":if(!r.suc)return n.cleanStack();n.PromiseValue=r.suc.call(void 0,n.PromiseValue);break;case"rejected":if(!r.err)return n.errorBack();n.PromiseValue=r.err.call(void 0,n.PromiseValue)}n.PromiseStatus="resolved"}catch(t){return n.PromiseStatus="rejected",n.PromiseValue=t,n.errorBack()}return n.successBack()},0):delete n.cleanStatus}}],[{key:"all",value:function(t){function e(n,r){a[r]=n,--i||u(a)}var i=t.length,u=void 0,a=[];return new n(function(n,i){u=n,r.each(t,function(n,r){n.PromiseStatus?n.then(function(n){e(n,r)},function(n){i(n)}):e(n,r)})})}},{key:"race",value:function(t){return new n(function(e,i){r.each(t,function(r){n.resolve(r).then(function(n){return e(n)},function(n){return i(n)})})})}},{key:"resolve",value:function(r){return new n(r&&r.then?function(n,t){r.then(n,t)}:function(n){n(r)})}},{key:"reject",value:function(r){return new n(function(n,t){t(r)})}}]),n}();jr.prototype["catch"]=function(n){return this.then(null,n)},jr.prototype["finally"]=function(n){return this.then(rr,rr).then(n)};var Ir=n.Promise;ar("promise",{when:function(){return!!Ir},priority:function(){return Ir},fixed:function(){return jr}}),Ir?Ir.prototype["finally"]=jr.prototype["finally"]:n.Promise=jr,ar("bind",{format:function(n){for(var t=arguments.length,e=Array(t>1?t-1:0),i=1;t>i;i++)e[i-1]=arguments[i];return[r.cb(n)].concat(e)},when:function(n){return X&&n.bind===X},priority:function(){for(var n=arguments.length,r=Array(n),t=0;n>t;t++)r[t]=arguments[t];return Function.call.apply(X,[].concat(r))},fixed:function(n){function r(){var t=this;t instanceof r||(t=e[0]);for(var i=arguments.length,u=Array(i),a=0;i>a;a++)u[a]=arguments[a];return Function.call.apply(n,[t].concat(e,u))}for(var t=arguments.length,e=Array(t>1?t-1:0),u=1;t>u;u++)e[u-1]=arguments[u];return i(r,n),r.toString=function(){return"function () { [native code] }"},r}}),ar("compose",{value:function(){for(var n=arguments.length,r=Array(n),t=0;n>t;t++)r[t]=arguments[t];return function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];for(var i=t,u=r.length-1;u>=0;u--)i=[].concat(r[u].apply(this,i));return i.length<=1?i[0]:i}}}),ar("toString",{value:function(n){if(!arguments.length)return"function limit() { [native code] }";if(null==n)return"";if(r.is(n,-0))return"-0";var t=""+n;if("[object Object]"===t)try{t=JSON.stringify(n),cr.toString(n,t)}catch(e){r.war(e)}return t}}),ar("valueOf",{value:function(n){if(!arguments.length)return r;if(null==n)return n;try{return n.valueOf()}catch(t){return n}}}),ar("wordWrap",{format:dr,fixed:function(n){var r=arguments.length<=1||void 0===arguments[1]?0:arguments[1],t=arguments.length<=2||void 0===arguments[2]?"...":arguments[2],e=n.length;return r=wr(r),r>0&&e>r?""+n.slice(0,r)+t:n}}),ar("parseString",{format:dr,fixed:function(n){var t=arguments.length<=1||void 0===arguments[1]?"&":arguments[1],e=arguments.length<=2||void 0===arguments[2]?"=":arguments[2];n=decodeURIComponent(n);var i={},u=n.split(t);return""===n?i:(r.each(u,function(n){var t=n.split(e),u=t[0],a=t[1];try{a=Z(a)}catch(o){}if(r.isUndefined(i[u]))i[u]=a;else if(r.isArray(i[u]))i[u].push(a);else{var c=i[u],f=i[u]=[];f.push(c,a)}}),i)}}),ar("unParseString",{format:gr,fixed:function(n){var t=arguments.length<=1||void 0===arguments[1]?"&":arguments[1],e=arguments.length<=2||void 0===arguments[2]?"=":arguments[2],i=[];return r.isObjectSuper(n)&&r.each(n,function(n,t){if(n=r.valueOf(n),r.isObject(n))try{var u=JSON.stringify(n);u&&i.push(""+t+e+u)}catch(a){i.push(""+t+e+n)}else i.push(""+t+e+n)}),i.join(t)}});var Lr=/^\s+|\s+$/g;ar("trim",{format:dr,when:function(n){return $&&n.trim===$},priority:function(){return Function.call.apply($,arguments)},fixed:function(n){return n.replace(Lr,"")}});var Mr=function(n,t){return n=r.padStart((1023&n).toString(2),10,"0"),t=r.padStart((1023&t).toString(2),10,"0"),parseInt(n+t,2)+65536};ar("codePointAt",{format:Ar,when:function(n){return z&&n.codePointAt===z},priority:function(){return Function.call.apply(z,arguments)},fixed:function(n,r){var t=n.charCodeAt(r);return t>=55296&&56319>=t?Mr(t,n.charCodeAt(++r)):t}});var Dr=function(n){if(parseInt(n,16)<=65535)return[n];var r=parseInt(n,16)-65536,t=r>>10,e=1023&r;return t=(55296|t).toString(16).toUpperCase(),e=(56320|e).toString(16).toUpperCase(),[t,e]};ar("fromCodePoint",{format:vr,when:function(){return!!J},priority:function(n){return J(n)},fixed:function(n){if(r.isNaN(n))throw new RangeError("Invalid code point NaN");if(0>n||n>1114111)throw new RangeError("Invalid code point "+n);return n=r.map(Dr(n.toString(16)),function(n){return"\\u"+r.padStart(n,4,"0")}).join(""),new Function('return "'+n+'"')()}}),ar("repeat",{format:Ar,when:function(n){return q&&n.repeat===q},priority:function(){return Function.call.apply(q,arguments)},fixed:function(n,t){return r.from(new Array(t),function(){return n}).join("")}}),ar("padStart",{format:Sr,when:function(n){return!1},priority:function(){return Function.call.apply(G,arguments)},fixed:function(n,t,e){var i=n.length,u=void 0;return i>=t?n:(u=Math.ceil((t-i)/e.length),(r.repeat(e,u)+n).slice(-t))}}),ar("padEnd",{format:Sr,when:function(n){return!1},priority:function(){return Function.call.apply(Q,arguments)},fixed:function(n,t,e){var i=n.length,u=void 0;return i>=t?n:(u=Math.ceil((t-i)/e.length),(n+r.repeat(e,u)).slice(0,t))}}),ar("startsWith",{format:dr,when:function(n){return K&&n.startsWith===K},priority:function(){return Function.call.apply(K,arguments)},fixed:function(n,t,e){e=r.parseInt(e);var i=n.indexOf(t,e);return-1!==i&&i===e}}),ar("endsWith",{format:dr,when:function(n){return Y&&n.endsWith===Y},priority:function(){return Function.call.apply(Y,arguments)},fixed:function(n,t,e){e=3===arguments.length?r.parseInt(e):n.length,e>n.length&&(e=n.length);var i=e-t.length,u=n.lastIndexOf(t,i);return-1!==u&&n.lastIndexOf(t,i)===i}}),ar("toNumber",{value:function(n){return null==n?0:r.isNumber(n)?n:r.isDate(n)||r.isBoolean(n)?+n:r.isString(n)&&r.isNumber(+n)?+n:(cr.toNumber(n),0/0)}}),ar("parseInt",{format:vr,fixed:function(n){return n||(n=0),parseInt(n,10)}}),ar("random",{value:function(n,t){n=r.parseInt(n),t=r.parseInt(t);var e=Math.max(n,t),i=Math.min(n,t);return Math.floor((e-i+1)*Math.random()+i)}});var Cr=/(\d{1,3})(?=(\d{3})+$)/g,Vr=/,/g;ar("thousandSeparator",{format:vr,fixed:function(n){var t=arguments.length<=1||void 0===arguments[1]?2:arguments[1];return t=wr(t),br(n)?(n=r.toFixed(n,t),n=n.split("."),n[0]=n[0].replace(Cr,"$1,"),n.join(".")):""}}),ar("unThousandSeparator",{value:function(n){return r.toNumber(n.replace(Vr,""))}});var Er=function(n,t,e,i){return i<e.length?n+t+e.slice(0,i)+"."+e.slice(i):n+t+r.padEnd(e,i,"0")},Wr=function(n,t,e,i){return t.length>i?n+t.slice(0,-i)+"."+t.slice(-i)+e:n+"0."+r.padStart(t,i,"0")+e},Tr=function(n,t){if(n=r.toNumber(n),!br(n))return n;if(n=r.toString(n),t=r.parseInt(t),0===t)return n;var e=void 0,i=void 0,u="";return n=n.split("."),e=n[0],i=n[1]||"","-"===e.charAt(0)&&(u="-",e=e.slice(1)),0>t?Wr(u,e,i,-t):Er(u,e,i,t)};ar("toFixed",{value:function(n,r){return r=wr(r),Tr(Math.round(Tr(n,r)),-r)}});var Hr=function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];return br(t)?Math.max.apply(Math,r.map(t,function(n){return((""+n).split(".")[1]||"").length})):null};ar("plus,+",{format:Nr,fixed:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var i=Hr.apply(void 0,t);return r.isNull(i)?0/0:r.reduce(t,function(n,r){return+Tr(+Tr(n,i)+ +Tr(r,i),-i)})}}),ar("minus,-",{format:Nr,fixed:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];var i=Hr.apply(void 0,t);return r.isNull(i)?0/0:r.reduce(t,function(n,r){return+Tr(+Tr(n,i)-+Tr(r,i),-i)})}});var Rr=function(n,t){var e=r.toString(n[0]),i=r.toString(n[1]),u=(e.split(".")[1]||"").length,a=(i.split(".")[1]||"").length,o=t?+Tr(+e.replace(".","")*+i.replace(".",""),-(u+a)):+Tr(+e.replace(".","")/+i.replace(".",""),a-u);return n.splice(0,2,o),o};ar("multiply,*",{format:Nr,fixed:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];if(!br(t))return 0/0;var i=Rr(t,!0);return t.length<=1?i:r["*"](t)}}),ar("except,/",{format:Nr,fixed:function(){for(var n=arguments.length,t=Array(n),e=0;n>e;e++)t[e]=arguments[e];if(!br(t))return 0/0;var i=Rr(t,!1);return t.length<=1?i:r["/"](t)}});var Ur=/\(([^()]*)\)/,Br=/(-?\d+(?:\.\d+)?)(?:\s*)([\*\/])(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)/,Jr=/^(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)([\+\-])(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)/;ar("express,?",{value:function(n){return Br.test(n)?r.express(n.replace(Br,function(n,t,e,i){return r[e](+t,+i)})):Ur.test(n)?r.express(n.replace(Ur,function(n,t){return r.express(t)})):Jr.test(n)?r.express(n.replace(Jr,function(n,t,e,i){return r[e](+t,+i)})):r.toNumber(n)}});var $r=/^(yyyy)?(?:(.*)(MM))?(?:(.*)(dd))?(?:(.*)(HH))?(?:(.*)(mm))?(?:(.*)(ss))?(.*)?$/,zr=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];ar("formatDate",{value:function(){var n=arguments.length<=0||void 0===arguments[0]?(new Date).getTime():arguments[0],t=arguments.length<=1||void 0===arguments[1]?"yyyy-MM-dd HH:mm:ss":arguments[1];return n=new Date(n),t=r.toString(t),r.isNaN(+n)||!$r.test(t)?"":t.replace($r,function(){for(var t=arguments.length,e=Array(t),i=0;t>i;i++)e[i]=arguments[i];var u=[];return r.each(b.call(e,1,-2),function(t,e){var i=void 0;t&&(e%2===0?(i=n[zr[e/2]](),"MM"===t&&i++,"yyyy"!==t&&(i=r.padStart(i,2,"0")),u.push(i)):u.push(t))}),u.join("")})}}),r.each(r,function(n,t){r.prototype[t]=r.isFunction(n)?function(){for(var n=arguments.length,e=Array(n),i=0;n>i;i++)e[i]=arguments[i];return this.__value__.push(r[t].apply(r,[r.last(this.__value__)].concat(e))),this}:n}),r.assign(r.prototype,{end:function(){return this.__value__.pop(),this},val:function(){return r.last(this.__value__)},toLog:function(){return r.log(this.val()),this}}),function(n){var r=/(\\u\w{4})/g;n.stringify=function(n){null==n&&(n="");var t=nr(n);return t?t.replace(r,function(n){return new Function('return "'+n+'"')()}):""}}(JSON),lr()}("undefined"==typeof window?global:window);