"use strict";function _classCallCheck(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,r=Array(n.length);t<n.length;t++)r[t]=n[t];return r}return Array.from(n)}var _createClass=function(){function n(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n};!function(n){function t(n){return this instanceof t?void(this.__value__=[n]):new t(n)}function r(){}function e(n){var t=Object.create;return t?t(n):n.__proto__?{__proto__:n}:(r.prototype=n,new r)}function i(n,t){return n.prototype=e(t.prototype),n}var u=this;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t),exports.limit=t):n.limit=t;var a=Object.prototype,o=Array.prototype,c=String.prototype,s=Function.prototype;t.limitFixed=!1,t.logClosed=!1;var f=Object.defineProperty,l=Object.is,m=Object.assign,g=Object.keys,p=Object.values,v=Object.entries,h=Object.getOwnPropertyNames,d=a.toString,y=a.hasOwnProperty,x=(a.valueOf,Array.from),w=Array.of,A=o.concat,b=o.push,S=o.slice,k=o.unshift,N=o.splice,F=o.join,_=o.pop,L=o.reverse,O=o.shift,j=o.sort,P=o.forEach,I=o.map,C=o.filter,E=o.some,M=o.every,D=o.indexOf,V=o.lastIndexOf,T=o.reduce,R=o.reduceRight,U=o.find,W=o.findIndex,H=o.fill,$=o.copyWithin,z=String.fromCodePoint,B=c.trim,J=c.codePointAt,K=c.startsWith,Y=c.endsWith,q=c.repeat,G=c.padStart,Q=c.padEnd,X=s.bind,Z=JSON.parse,nt=JSON.stringify,tt=function(n){return n},rt=function(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return t},et=function(){},it={},ut=function(){var n=arguments.length<=0||void 0===arguments[0]?it:arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=arguments[2];return void 0===n[t]?r:n[t]},at=function Xt(n){var r=arguments.length<=1||void 0===arguments[1]?it:arguments[1],e=void 0,i=void 0,u=void 0,a=void 0,c=void 0,s=n.split(",");return n=s.shift(),void 0===r.value?(e=ut(r,"priority",rt),i=ut(r,"fixed",tt),u=ut(r,"when",et),a=ut(r,"format",rt),c=function(){var n=A.call(o,a.apply(void 0,arguments));return!t.limitFixed&&u.apply(void 0,_toConsumableArray(n))?e.apply(void 0,_toConsumableArray(n)):i.apply(void 0,_toConsumableArray(n))}):c=r.value,"function"==typeof c&&(c.toString=function(){return"function () { [native code] }"}),f(t,n,{value:c,writable:!1,enumerable:!0,configurable:!1}),s.length?Xt(s.join(","),r):c};at("E",{value:et}),at("K",{value:tt}),at("F",{value:rt}),at("V",{value:"2.2.1"}),at("getProp",{value:ut});var ot={log:"background:#333;",error:"background:#F00;",info:"background:#4d90fe;",warn:"background:#F70;"},ct={toString:function(n,r){return t.message("warn",n,"change into",r)},toNumber:function(n){return t.message("warn",n,"change into","NaN")},toArray:function(n){return t.message("warn",n,"change into []")},finiteNum:function(n){return t.message("warn",n,"is not a finite Number")},formatDate:function(){return t.message("warn","timestamp:",timestamp,"date:",date,"limit.formatDate is called")},bind:function(){return t.message("warn",fun,"type is not function, limit.bind is called")}};at("message",{value:function(){if(!t.logClosed){for(var r=arguments.length,e=Array(r),i=0;r>i;i++)e[i]=arguments[i];var u=e.shift(),a=console||it,o=void 0,c=n.chrome;t.contains(["error","log","warn","info"],u)||(e.unshift(u),u="error"),o=a[u]||tt;try{c&&e.unshift(ot[u]+"color:#FFF;padding-left:3px;border-radius:3px;"),e.unshift((c?"%c":"")+u.slice(0,3)+":"),o.apply(a,e)}catch(s){o("日志 ",e)}}}}),at("err",{value:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];mt(["err["+t.formatDate()+"]"].concat(r)),t.message.apply(t,["error"].concat(r))}}),at("war",{value:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];mt(["war["+t.formatDate()+"]"].concat(r)),t.message.apply(t,["warn"].concat(r))}}),at("inf",{value:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];mt(["inf["+t.formatDate()+"]"].concat(r)),t.message.apply(t,["info"].concat(r))}}),at("log",{value:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];t.message.apply(t,["log"].concat(r))}});var st=/limitLog(\d+\.\d+)/,ft=n.localStorage,lt=function(){ft&&!function(){var n=t.formatDate((new Date).getTime(),"yyyyMMdd.HH");t.forin(ft,function(r,e){st.test(e)&&t["?"](n+" - "+RegExp.$1)>1&&localStorage.removeItem(e)})}()},mt=function(n){if(ft){var r=t.formatDate((new Date).getTime(),"yyyyMMdd.HH"),e="limitLog"+r,i=ft.getItem(e)||"";ft.setItem(e,""+i+n+"\n")}};at("isElement",{value:function(n){return!!n&&1===n.nodeType}}),at("isDocument",{value:function(n){return!!n&&9===n.nodeType}}),at("isWin",{value:function(n){return!!n&&n.window===n&&n.self==n}}),at("isUndefined",{value:function(n){return void 0===n}}),at("isDefined",{value:function(n){return!t.isUndefined(n)}}),at("isNull",{value:function(n){return null===n}}),at("isFunction",{value:function(n){return"function"==typeof n}}),at("isBoolean",{value:function(n){return n===!0||n===!1||"[object Boolean]"===d.call(n)}}),"String,Number,Array,Date,RegExp,Error,Math".replace(/\w+/g,function(n){return at("is"+n,{value:function(t){return d.call(t)==="[object "+n+"]"}})}),at("isObject",{value:function(n){return t.isFunction(n)||"object"===("undefined"==typeof n?"undefined":_typeof(n))&&!!n}}),at("isObjectSuper",{value:function(n){return"[object Object]"===d.call(n)&&""+n=="[object Object]"}}),at("isArguments",{value:function(n){return t.has(n,"callee")}}),at("isArrayLike",{value:function(n){return!!n&&t.isNumber(n.length)&&!t.isFunction(n)&&!t.isWin(n)}}),at("isNaN",{when:function(){return!!Number.isNaN},priority:function(){return Number.isNaN.apply(Number,arguments)},fixed:function(n){return t.isNumber(n)&&isNaN(n)}}),at("isFinite",{when:function(){return!!Number.isFinite},priority:function(){return Number.isFinite.apply(Number,arguments)},fixed:function(n){return t.isNumber(n)&&isFinite(n)}}),at("isInteger",{when:function(){return!!Number.isInteger},priority:function(){return Number.isInteger.apply(Number,arguments)},fixed:function(n){return t.isFinite(n)&&Math.floor(n)===n}}),at("isSafeInteger",{when:function(){return!!Number.isSafeInteger},priority:function(){return Number.isSafeInteger.apply(Number,arguments)},fixed:function(n){return t.isInteger(n)&&n>-9007199254740992&&9007199254740992>n}}),at("isEmpty",{value:function(n){return null==n?!0:t.isFunction(n)?!1:t.isArrayLike(n)||t.isObject(t.valueOf(n))?0===t.size(n):!1}});var gt=function(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;t>e;e++)r[e-1]=arguments[e];return null==n?[{}].concat(r):[n].concat(r)},pt=function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return[t.toArray(n)].concat(e)},vt=function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return[t.toString(n)].concat(e)},ht=function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return[t.toNumber(n)].concat(e)},dt=function(n,r){for(var e=arguments.length,i=Array(e>2?e-2:0),u=2;e>u;u++)i[u-2]=arguments[u];return gt.apply(void 0,[n,t.cb(r)].concat(i))},yt=function(n,r){for(var e=arguments.length,i=Array(e>2?e-2:0),u=2;e>u;u++)i[u-2]=arguments[u];return pt.apply(void 0,[n,t.cb(r)].concat(i))},xt=function(n,r){return r=t.parseInt(r),n=t.parseInt(n),0>r&&(r=n+r,0>r&&(r=0)),r},wt=function(n){return n=t.parseInt(n),0>n?0:n},At=function(n,r){return[t.toString(n),wt(r)]},bt=function(n,r,e){return e=t.toString(e),[t.toString(n),wt(r),e?e:" "]},St=function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];return t.every(t.flatten(r),function(n){var r=t.isFinite(n);return r||ct.finiteNum(n),r})},kt=function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];return t.flatten(r)},Nt=[0,0,0];at("getUid",{value:function(){for(var n=Nt.length,t=void 0;n--;)if(t=Nt[n],9===t&&(Nt[n]=0),9>t)return Nt[n]++,Nt.join(".");return Nt.unshift(1),Nt.join(".")}}),at("getTimeUid",{value:function(){return(new Date).getTime()+t.getUid().split(".").join("")}}),at("_loop",{value:function(n,r,e,i,u){for(var a=t._getLoopKey(n),o=void 0,c=t.parseInt(u),s=a.length;s>c&&(o=a[c],r.call(e,n[o],o,n)!==!1||!i);c++);}}),at("_getLoopKey",{value:function(n){return t.keys(t.isArrayLike(n)?t.toArray(n):n)}}),at("has",{format:gt,fixed:function(n,t){return y.call(n,t)}}),at("cb",{value:function(n){return t.isFunction(n)?n:tt}}),at("forin",{format:dt,fixed:function(n,t,r){for(var e in n)t.call(r,n[e],e,n)}}),at("each",{format:dt,when:function(n){return isArrayLike(n)&&P},priority:function(n,t,r){return P.call(n,function(n,r){t.call(u,n,""+r)},r)},value:function(n,r,e){return t._loop(n,r,e)}}),at("is",{when:function(){return!!l},priority:function(){return l.apply(void 0,arguments)},fixed:function(n,r){return t.isNaN(n)&&t.isNaN(r)?!0:0===n&&0===r?1/n===1/r:n===r}}),at("assign",{when:function(){return!!m},priority:function(){return m.apply(void 0,arguments)},format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.each(r,function(t,r){n[r]=t})}),n}}),at("values",{when:function(){return!!p},priority:function(){return p.apply(void 0,arguments)},format:gt,fixed:function(n){var r=[];return t.each(n,function(n){r.push(n)}),r}}),at("entries",{when:function(){return!!v},priority:function(){return v.apply(void 0,arguments)},format:gt,fixed:function(n){var r=[];return t.each(n,function(n,t){r.push([t,n])}),r}});var Ft=function(n){var r=[];return t.forin(n,function(e,i){return t.has(n,i)&&r.push(i)}),r};at("keys",{when:function(){return!!g},priority:function(){try{return g.apply(void 0,arguments)}catch(n){return Ft.apply(void 0,arguments)}},format:gt,fixed:Ft}),at("keysSuper",{format:gt,fixed:function(n){return h?h(n):Ft(n)}}),at("assignSuper",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.each(r,function(r,e){t.isDefined(r)&&(n[e]=r)})}),n}}),at("assignLazy",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.each(r,function(r,e){t.isDefined(r)&&t.isUndefined(n[e])&&(n[e]=r)})}),n}}),at("extend",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.forin(r,function(t,r){n[r]=t})}),n}}),at("extendSuper",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.forin(r,function(r,e){t.isDefined(r)&&(n[e]=r)})}),n}}),at("extendLazy",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.forin(r,function(r,e){t.isDefined(r)&&t.isUndefined(n[e])&&(n[e]=r)})}),n}}),at("getValueInObject",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.some(e,function(t){try{n=n[t]}catch(r){return n=void 0,!0}}),n}}),at("size",{value:function(n){return t._getLoopKey(n).length}}),at("stack",{format:gt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return t.each(e,function(r){t.each(n,function(e,i){var u=r[i];t.isDefined(u)&&(n[i]=u)})}),n}});var _t=function(n){for(var t=[],r=0;r<n.length;r++)t[r]=n[r];return t};at("toArray",{value:function(n){var r=[];if(t.isArray(n))return b.apply(r,n),r;if(t.isArrayLike(n)){var e=void 0;try{e=S.call(n)}catch(i){e=_t(n)}return b.apply(r,e),r}return ct.toArray(n),r}}),at("contains",{value:function(n,r){return t.some(n,function(n){return t.is(n,r)})}}),at("flatten",{value:function Zt(){for(var Zt=[],n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];return t.forEach(r,function(n){b.apply(Zt,t.isArray(n)?t.flatten.apply(void 0,A.apply(o,n)):[n])}),Zt}}),at("union",{format:pt,fixed:function(n){var r=new Map;return t.filter(n,function(n){return r.has(n)?void 0:(r.set(n,!0),!0)})}});var Lt=function(n,r){return t.some(n,function(n){return t.every(n,function(n,e){return t.is(n,r[e])})})};at("whiteList",{format:pt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return e=t.flatten(e),t.filter(n,function(n){return Lt(e,n)})}}),at("blackList",{format:pt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return e=t.flatten(e),t.filter(n,function(n){return!Lt(e,n)})}}),at("difference",{value:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return e=t.flatten(e),t.filter(n,function(n){return!t.contains(e,n)})}}),at("remove",{format:gt,fixed:function(n,r,e){var i=t.indexOfSuper(n,r,e);if(-1!==i)try{return t.isArray(n)?n.splice(i,1):delete n[i],!0}catch(u){try{return n[i]=void 0,!0}catch(a){t.err(u,a)}}return!1}}),at("removeAll",{value:function(n,r){return t.remove(n,r)?t.removeAll(n,r):n}}),at("first",{format:gt,when:function(n){return t.isArrayLike(n)},priority:function(n){return n[0]},fixed:function(n){var r=t.keys(n);return n[r[0]]}}),at("last",{format:gt,when:function(n){return t.isArrayLike(n)},priority:function(n){return n[n.length-1]},fixed:function(n){var r=t.keys(n);return n[r[r.length-1]]}}),at("push",{format:pt,fixed:function(){return Function.call.apply(b,arguments),arguments[0]}}),at("pop",{format:pt,fixed:function(){return Function.call.apply(_,arguments),arguments[0]}}),at("unshift",{format:pt,fixed:function(){return Function.call.apply(k,arguments),arguments[0]}}),at("shift",{format:pt,fixed:function(){return Function.call.apply(O,arguments),arguments[0]}}),at("reverse",{format:pt,fixed:function(){return Function.call.apply(L,arguments)}}),at("sort",{format:pt,fixed:function(){return Function.call.apply(j,arguments)}}),at("splice",{format:pt,fixed:function(){return Function.call.apply(N,arguments),arguments[0]}}),at("join",{format:pt,fixed:function(){return Function.call.apply(F,arguments)}}),at("concat",{format:pt,fixed:function(){return Function.call.apply(A,arguments)}}),at("slice",{format:pt,fixed:function(){return Function.call.apply(S,arguments)}}),at("forEach",{format:dt,when:function(n){return P&&n.forEach===P},priority:function(){return Function.call.apply(P,arguments)},fixed:function(n,r,e){return t.isArrayLike(n)?t.each(n,function(t,i){r.call(e,t,+i,n)},e):t.each(n,r,e)}}),at("map",{format:dt,when:function(n){return I&&n.map===I},priority:function(){return Function.call.apply(I,arguments)},fixed:function(n,r,e){var i=t.isArrayLike(n)?[]:{};return t.each(n,function(t,e){i[e]=r.call(this,t,e,n)},e),i}}),at("filter",{format:dt,when:function(n){return C&&n.filter===C},priority:function(){return Function.call.apply(C,arguments)},fixed:function(n,r,e){var i=t.isArrayLike(n),u=i?[]:{};return i?t.each(n,function(t,e){r.call(this,t,e,n)&&u.push(t)},e):t.each(n,function(t,e){r.call(this,t,e,n)&&(u[e]=t)}),u}}),at("some",{format:dt,when:function(n){return E&&n.some===E},priority:function(){return Function.call.apply(E,arguments)},fixed:function(n,r,e){var i=!1;return t.isArrayLike(n)?t._loop(n,function(t,u){return r.call(e,t,+u,n)?(i=!0,!1):void 0},void 0,!0):t._loop(n,function(t,u){return r.call(e,t,u,n)?(i=!0,!1):void 0},void 0,!0),i}}),at("every",{format:dt,when:function(n){return M&&n.every===M},priority:function(){return Function.call.apply(M,arguments)},fixed:function(n,r,e){var i=!0;return t.isArrayLike(n)?t._loop(n,function(t,u){return r.call(e,t,+u,n)?void 0:i=!1},void 0,!0):t._loop(n,function(t,u){return r.call(e,t,u,n)?void 0:i=!1},void 0,!0),i}}),at("indexOf",{format:gt,when:function(n){return D&&n.indexOf===D},priority:function(){return Function.call.apply(D,arguments)},fixed:function(n,r,e){var i=-1;return t._loop(n,function(n,t){return n===r?(i=t,!1):void 0},void 0,!0,xt(n.length,e)),t.isArrayLike(n)?+i:i}}),at("indexOfSuper",{format:gt,fixed:function(n,r,e){var i=-1;return t._loop(n,function(n,e){return t.is(n,r)?(i=e,!1):void 0},void 0,!0,xt(n.length,e)),t.isArrayLike(n)?+i:i}}),at("lastIndexOf",{format:pt,when:function(n){return V&&n.lastIndexOf===V},priority:function(){return Function.call.apply(V,arguments)},fixed:function(n,r,e){e=t.parseInt(e);var i=n.length-1,u=t.indexOf(n.reverse(),r,3===arguments.length?i-e:e);return-1===u?-1:i-u}});var Ot=new TypeError("Reduce of empty array with no initial value");at("reduce",{format:yt,when:function(n){return T&&n.reduce===T},priority:function(){return Function.call.apply(T,arguments)},fixed:function(n,r,e){var i=arguments.length,u=0,a=2===i,o=a?n[u++]:e;if(a&&0===n.length)throw Ot;return t._loop(n,function(t,e){o=r.call(this,o,t,+e,n)},void 0,!1,u),o}}),at("reduceRight",{format:yt,when:function(n){return R&&n.reduceRight===R},priority:function(){return Function.call.apply(R,arguments)},fixed:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];var i=r[0].length-1,u=r[1];return r[0].reverse(),r[1]=function(n,t,r,e){return u(n,t,i-r,e)},t.reduce.apply(t,r)}}),at("from",{format:dt,when:function(){return!!x},priority:function(){return x.apply(void 0,arguments)},fixed:function(n,r,e){var i=[];return n&&n.length?(b.apply(i,S.call(n)),t.map(i,r,e)):i}}),at("of",{when:function(){return!!w},priority:function(){return w.apply(void 0,arguments)},fixed:function(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return S.call(t)}}),at("find",{format:dt,when:function(n){return U&&n.find===U},priority:function(){return Function.call.apply(U,arguments)},fixed:function(n,r){var e=void 0;return t.some(n,function(n,t,i){return r(n,t,i)?(e=n,!0):void 0}),e}}),at("findIndex",{format:dt,when:function(n){return W&&n.findIndex===W},priority:function(){return Function.call.apply(W,arguments)},fixed:function(n,r){var e=-1;return t.some(n,function(n,t,i){return r(n,t,i)?(e=t,!0):void 0}),e}}),at("fill",{format:pt,when:function(n){return H&&n.fill===H},priority:function(){return Function.call.apply(H,arguments)},fixed:function(n,r,e,i){var u=n.length;e=t.parseInt(e),i=t.parseInt(i),e=0>e?u+e:e,i=0>=i?u+i:i,0>e&&(e=0),i>u&&(i=u);var a=i-e;if(a>0){var o=t.from(new Array(a),function(){return r});k.call(o,e,a),N.apply(n,o)}return n}}),at("includes",{when:function(n){return!!n.includes},priority:function(n,t,r){return n.includes(t,r)},fixed:function(n,r,e){if(t.isString(n))return-1!==n.indexOf(r,e);if(t.isNaN(r)){var i=!1;return t._loop(n,function(n){return t.isNaN(n)?(i=!0,!1):void 0},void 0,!0,xt(n.length,e)),i}return-1!==t.indexOf(n,r,e)}}),at("copyWithin",{format:pt,when:function(n){return $&&n.copyWithin===$},priority:function(){return Function.call.apply($,arguments)},fixed:function(n,t,r,e){var i=n.slice(r,e);return i.unshift(t,i.length),N.apply(n,i),n}});var jt=function(){function n(){var r=this;if(_classCallCheck(this,n),this.PromiseStatus="pedding",this.PromiseValue=void 0,this.Stack=[],t.isFunction(arguments.length<=0?void 0:arguments[0])){this.promiseList=[];var e=arguments.length<=0?void 0:arguments[0],i=function(n){t.each([r].concat(r.promiseList),function(t){"pedding"===t.PromiseStatus&&(t.PromiseStatus="resolved",t.PromiseValue=n,t.cleanStack())})},u=function(n){t.each([r].concat(r.promiseList),function(t){"pedding"===t.PromiseStatus&&(t.PromiseStatus="rejected",t.PromiseValue=n,t.cleanStack())}),setTimeout(function(){if(!r.promiseList.length)throw"(in promise) "+n},0)};try{e(i,u)}catch(a){this.PromiseStatus="rejected",this.PromiseValue=a}}else this.PromiseStatus=arguments.length<=0?void 0:arguments[0],this.PromiseValue=arguments.length<=1?void 0:arguments[1]}return _createClass(n,[{key:"then",value:function(t,r){var e=this;if(e.promiseList){var i=e;e=new n(e.PromiseStatus,e.PromiseValue),i.promiseList.push(e)}return e.Stack.push({suc:t,err:r}),"pedding"===e.PromiseStatus||e.cleanStatus||e.cleanStack(),e}},{key:"errorBack",value:function(){var n=this;return n.Stack.length?n.cleanStack():setTimeout(function(){throw"(in promise) "+n.PromiseValue},0)}},{key:"successBack",value:function(){var n=this,t=n.PromiseValue;return t&&t.then?void t.then(function(t){n.PromiseValue=t,n.PromiseStatus="resolved"},function(t){n.PromiseValue=t,n.PromiseStatus="rejected"}).then(function(){n.cleanStack()}):n.cleanStack()}},{key:"cleanStack",value:function(){var n=this,t=n.Stack.shift();n.cleanStatus="init",t?setTimeout(function(){try{switch(n.PromiseStatus){case"resolved":if(!t.suc)return n.cleanStack();n.PromiseValue=t.suc.call(void 0,n.PromiseValue);break;case"rejected":if(!t.err)return n.errorBack();n.PromiseValue=t.err.call(void 0,n.PromiseValue)}n.PromiseStatus="resolved"}catch(r){return n.PromiseStatus="rejected",n.PromiseValue=r,n.errorBack()}return n.successBack()},0):delete n.cleanStatus}}],[{key:"all",value:function(r){function e(n,t){a[t]=n,--i||u(a)}var i=r.length,u=void 0,a=[];return new n(function(n,i){u=n,t.each(r,function(n,t){n.PromiseStatus?n.then(function(n){e(n,t)},function(n){i(n)}):e(n,t)})})}},{key:"race",value:function(r){return new n(function(e,i){t.each(r,function(t){n.resolve(t).then(function(n){return e(n)},function(n){return i(n)})})})}},{key:"resolve",value:function(t){return new n(t&&t.then?function(n,r){t.then(n,r)}:function(n){n(t)})}},{key:"reject",value:function(t){return new n(function(n,r){r(t)})}}]),n}();jt.prototype["catch"]=function(n){return this.then(null,n)},jt.prototype["finally"]=function(n){return this.then(tt,tt).then(n)};var Pt=n.Promise;at("promise",{when:function(){return!!Pt},priority:function(){return Pt},fixed:function(){return jt}}),Pt?Pt.prototype["finally"]=jt.prototype["finally"]:n.Promise=jt;var It=function(){function n(r){_classCallCheck(this,n);var e=this,i=e.arr=[];t.forEach(r,function(n){if(!t.isArray(n))throw new TypeError("Iterator value "+n+" is not an entry object");i.push({key:n[0],val:n[1]})})}return _createClass(n,[{key:"clear",value:function(){var n=this;n.arr.length=0}},{key:"forEach",value:function(n,r){var e=this;t.forEach(e.arr,function(t){n.call(r,t.val,t.key)})}},{key:"_get",value:function(n){var r=this,e=[];return t.some(r.arr,function(r,i){return t.is(r.key,n)?(e.push(r,i),!0):void 0}),e}},{key:"has",value:function(n){var r=this;return t.some(r.arr,function(r){return t.is(r.key,n)})}},{key:"get",value:function(n){var r=this,e=void 0;return t.some(r.arr,function(r){return t.is(r.key,n)?(e=r.val,!0):void 0}),e}},{key:"set",value:function(n,t){var r=this,e=r.arr,i=r._get(n);return i.length?i[0].val=t:e.push({key:n,val:t}),r}},{key:"keys",value:function(){var n=this,t=[];return n.forEach(function(n,r){t.push(r)}),t}},{key:"values",value:function(){var n=this,t=[];return n.forEach(function(n){t.push(n)}),t}},{key:"size",value:function(){var n=this;return n.arr.length}}]),n}();It.prototype["delete"]=function(n){var t=this,r=t.arr,e=t._get(n);return e.length?(r.splice(e[1],1),!0):!1};var Ct=n.Map;at("Map",{when:function(){return!!Ct},priority:function(){return Ct},fixed:function(){return It}}),Ct||(n.Map=It),at("bind",{format:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return[t.cb(n)].concat(e)},when:function(n){return X&&n.bind===X},priority:function(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return Function.call.apply(X,[].concat(t))},fixed:function(n){function t(){var r=this;r instanceof t||(r=e[0]),e.shift();for(var i=arguments.length,u=Array(i),a=0;i>a;a++)u[a]=arguments[a];return Function.call.apply(n,[r].concat(e,u))}for(var r=arguments.length,e=Array(r>1?r-1:0),u=1;r>u;u++)e[u-1]=arguments[u];return i(t,n),t.toString=function(){return"function () { [native code] }"},t}}),at("compose",{value:function(){for(var n=arguments.length,t=Array(n),r=0;n>r;r++)t[r]=arguments[r];return function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];for(var i=r,u=t.length-1;u>=0;u--)i=[].concat(t[u].apply(this,i));return i.length<=1?i[0]:i}}});var Et=function(){function n(){_classCallCheck(this,n),this.state={maxListeners:10,listeners:{}}}return _createClass(n,[{key:"warnListenerCount",value:function(n){var r=this,e=r.state,i=e.listeners,u=i[n].length;u>e.maxListeners&&t.war("Possible EventEmitter memory leak detected. "+u+" "+n+" listeners added. Use emitter.setMaxListeners() to increase limit")}},{key:"on",value:function(n,r){var e=this,i=e.state,u=i.listeners;return u[n]?(u[n].push(t.cb(r)),e.warnListenerCount(n)):u[n]=[t.cb(r)],e}},{key:"once",value:function(n,r){var e=this,i=e.state,u=i.listeners,a=function o(){var i;(i=t.cb(r)).call.apply(i,[e].concat(Array.prototype.slice.call(arguments))),e.removeListener(n,o),e.warnListenerCount(n)};return u[n]?u[n].push(a):u[n]=[a],e}},{key:"emit",value:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];var u=this,a=u.state,o=a.listeners;return o[n]&&t.each(o[n],function(n){n.call.apply(n,[u].concat(e))}),u}},{key:"removeListener",value:function(n,r){var e=this,i=e.state,u=i.listeners;return u[n]&&t.remove(u[n],r),e}},{key:"removeAllListeners",value:function(n){var t=this,r=t.state,e=r.listeners;return e[n]?delete e[n]:r.listeners={},t}},{key:"getMaxListeners",value:function(){var n=this,t=n.state;return t.maxListeners}},{key:"setMaxListeners",value:function(n){var r=this,e=r.state;return e.maxListeners=t.parseInt(n),r}},{key:"destroy",value:function(){var n=this;return n.state={listeners:{},maxListeners:10},delete n.props,n}}]),n}();at("Events",{value:Et}),at("toString",{value:function(n){if(!arguments.length)return"function limit() { [native code] }";if(null==n)return"";if(t.is(n,-0))return"-0";var r=""+n;if("[object Object]"===r)try{r=JSON.stringify(n),ct.toString(n,r)}catch(e){t.war(e)}return r}}),at("parseHumpString",{format:vt,fixed:function(n){for(var r=arguments.length,e=Array(r>1?r-1:0),i=1;r>i;i++)e[i-1]=arguments[i];return e=e.map(function(n){return n=t.toString(n),n.length>1?""+n.slice(0,1).toLocaleUpperCase()+n.slice(1).toLocaleLowerCase():n}),[n].concat(_toConsumableArray(e)).join("")}}),at("valueOf",{value:function(n){if(!arguments.length)return t;if(null==n)return n;try{return n.valueOf()}catch(r){return n}}}),at("wordWrap",{format:vt,fixed:function(n){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],r=arguments.length<=2||void 0===arguments[2]?"...":arguments[2],e=n.length;return t=wt(t),t>0&&e>t?""+n.slice(0,t)+r:n}}),at("parseString",{format:vt,fixed:function(n){var r=arguments.length<=1||void 0===arguments[1]?"&":arguments[1],e=arguments.length<=2||void 0===arguments[2]?"=":arguments[2],i={},u=n.split(r);return""===n?i:(t.each(u,function(n){var r=n.split(e),u=r[0],a=r[1];try{a=Z(a)}catch(o){}if(t.isUndefined(i[u]))i[u]=a;else if(t.isArray(i[u]))i[u].push(a);else{var c=i[u],s=i[u]=[];s.push(c,a)}}),i)}}),at("unParseString",{format:gt,fixed:function(n){var r=arguments.length<=1||void 0===arguments[1]?"&":arguments[1],e=arguments.length<=2||void 0===arguments[2]?"=":arguments[2],i=[];return t.isObjectSuper(n)&&t.each(n,function(n,r){if(n=t.valueOf(n),t.isObject(n))try{var u=JSON.stringify(n);u&&i.push(""+r+e+u)}catch(a){i.push(""+r+e+n)}else i.push(""+r+e+n)}),i.join(r)}});var Mt=/^(\w+)\.(.+)/,Dt=/^(\w+)\[(\d+)\](.+)/;at("serialize",{format:gt,fixed:function(n){return t.each(n,function(r,e){if(Mt.test(e)){var i=RegExp.$1,u=RegExp.$2,a=n[i];return a||(a=n[i]={}),a[u]=r,delete n[e],t.serialize(a)}if(Dt.test(e)){var o=RegExp.$1,c=RegExp.$2,s=RegExp.$3,f=n[o];f||(f=n[o]=[]);var l=f[c];return l||(l=f[c]={}),l[s]=r,delete n[e],t.serialize(l)}JSON[e]=r}),n}});var Vt=/^\s+|\s+$/g;at("trim",{format:vt,when:function(n){return B&&n.trim===B},priority:function(){return Function.call.apply(B,arguments)},fixed:function(n){return n.replace(Vt,"")}});var Tt=function(n,r){return n=t.padStart((1023&n).toString(2),10,"0"),r=t.padStart((1023&r).toString(2),10,"0"),parseInt(n+r,2)+65536};at("codePointAt",{format:At,when:function(n){return J&&n.codePointAt===J},priority:function(){return Function.call.apply(J,arguments)},fixed:function(n,t){var r=n.charCodeAt(t);return r>=55296&&56319>=r?Tt(r,n.charCodeAt(++t)):r}});var Rt=function(n){if(parseInt(n,16)<=65535)return[n];var t=parseInt(n,16)-65536,r=t>>10,e=1023&t;return r=(55296|r).toString(16).toUpperCase(),e=(56320|e).toString(16).toUpperCase(),[r,e]};at("fromCodePoint",{format:ht,when:function(){return!!z},priority:function(n){return z(n)},fixed:function(n){if(t.isNaN(n))throw new RangeError("Invalid code point NaN");if(0>n||n>1114111)throw new RangeError("Invalid code point "+n);return n=t.map(Rt(n.toString(16)),function(n){return"\\u"+t.padStart(n,4,"0")}).join(""),new Function('return "'+n+'"')()}}),at("repeat",{format:At,when:function(n){return q&&n.repeat===q},priority:function(){return Function.call.apply(q,arguments)},fixed:function(n,r){return t.from(new Array(r),function(){return n}).join("")}}),at("padStart",{format:bt,when:function(n){return!1},priority:function(){return Function.call.apply(G,arguments)},fixed:function(n,r,e){var i=n.length,u=void 0;return i>=r?n:(u=Math.ceil((r-i)/e.length),(t.repeat(e,u)+n).slice(-r))}}),at("padEnd",{format:bt,when:function(n){return!1},priority:function(){return Function.call.apply(Q,arguments)},fixed:function(n,r,e){var i=n.length,u=void 0;return i>=r?n:(u=Math.ceil((r-i)/e.length),(n+t.repeat(e,u)).slice(0,r))}}),at("startsWith",{format:vt,when:function(n){return K&&n.startsWith===K},priority:function(){return Function.call.apply(K,arguments)},fixed:function(n,r,e){e=t.parseInt(e);var i=n.indexOf(r,e);return-1!==i&&i===e}}),at("endsWith",{format:vt,when:function(n){return Y&&n.endsWith===Y},priority:function(){return Function.call.apply(Y,arguments)},fixed:function(n,r,e){e=3===arguments.length?t.parseInt(e):n.length,e>n.length&&(e=n.length);var i=e-r.length,u=n.lastIndexOf(r,i);return-1!==u&&n.lastIndexOf(r,i)===i}}),at("toNumber",{value:function(n){return null==n?0:t.isNumber(n)?n:t.isDate(n)||t.isBoolean(n)?+n:t.isString(n)&&t.isNumber(+n)?+n:(ct.toNumber(n),0/0)}}),at("parseInt",{format:ht,fixed:function(n){return n||(n=0),parseInt(n,10)}}),at("random",{value:function(n,r){n=t.parseInt(n),r=t.parseInt(r);var e=Math.max(n,r),i=Math.min(n,r);return Math.floor((e-i+1)*Math.random()+i)}});var Ut=/(\d{1,3})(?=(\d{3})+$)/g,Wt=/,/g;at("thousandSeparator",{format:ht,fixed:function(n){var r=arguments.length<=1||void 0===arguments[1]?2:arguments[1];return r=wt(r),St(n)?(n=t.toFixed(n,r),n=n.split("."),n[0]=n[0].replace(Ut,"$1,"),n.join(".")):""}}),at("unThousandSeparator",{value:function(n){return t.toNumber(n.replace(Wt,""))}});var Ht=function(n,r,e,i){return i<e.length?n+r+e.slice(0,i)+"."+e.slice(i):n+r+t.padEnd(e,i,"0")},$t=function(n,r,e,i){return r.length>i?n+r.slice(0,-i)+"."+r.slice(-i)+e:n+"0."+t.padStart(r,i,"0")+e},zt=function(n,r){if(n=t.toNumber(n),!St(n))return n;if(n=t.toString(n),r=t.parseInt(r),0===r)return n;var e=void 0,i=void 0,u="";return n=n.split("."),e=n[0],i=n[1]||"","-"===e.charAt(0)&&(u="-",e=e.slice(1)),0>r?$t(u,e,i,-r):Ht(u,e,i,r)};at("toFixed",{value:function(n,t){return t=wt(t),zt(Math.round(zt(n,t)),-t)}});var Bt=function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];return St(r)?Math.max.apply(Math,t.map(r,function(n){return((""+n).split(".")[1]||"").length})):null};at("plus,+",{format:kt,fixed:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];var i=Bt.apply(void 0,r);return t.isNull(i)?0/0:t.reduce(r,function(n,t){return+zt(+zt(n,i)+ +zt(t,i),-i)})}}),at("minus,-",{format:kt,fixed:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];var i=Bt.apply(void 0,r);return t.isNull(i)?0/0:t.reduce(r,function(n,t){return+zt(+zt(n,i)-+zt(t,i),-i)
})}});var Jt=function(n,r){var e=t.toString(n[0]),i=t.toString(n[1]),u=(e.split(".")[1]||"").length,a=(i.split(".")[1]||"").length,o=r?+zt(+e.replace(".","")*+i.replace(".",""),-(u+a)):+zt(+e.replace(".","")/+i.replace(".",""),a-u);return n.splice(0,2,o),o};at("multiply,*",{format:kt,fixed:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];if(!St(r))return 0/0;var i=Jt(r,!0);return r.length<=1?i:t["*"](r)}}),at("except,/",{format:kt,fixed:function(){for(var n=arguments.length,r=Array(n),e=0;n>e;e++)r[e]=arguments[e];if(!St(r))return 0/0;var i=Jt(r,!1);return r.length<=1?i:t["/"](r)}});var Kt=/\(([^()]*)\)/,Yt=/(-?\d+(?:\.\d+)?)(?:\s*)([\*\/])(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)/,qt=/^(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)([\+\-])(?:\s*)(-?\d+(?:\.\d+)?)(?:\s*)/;at("express,?",{value:function(n){return Yt.test(n)?t.express(n.replace(Yt,function(n,r,e,i){return t[e](+r,+i)})):Kt.test(n)?t.express(n.replace(Kt,function(n,r){return t.express(r)})):qt.test(n)?t.express(n.replace(qt,function(n,r,e,i){return t[e](+r,+i)})):t.toNumber(n)}});var Gt=/^(yyyy)?(?:(.*)(MM))?(?:(.*)(dd))?(?:(.*)(HH))?(?:(.*)(mm))?(?:(.*)(ss))?(.*)?$/,Qt=["getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds"];at("formatDate",{value:function(){var n=arguments.length<=0||void 0===arguments[0]?(new Date).getTime():arguments[0],r=arguments.length<=1||void 0===arguments[1]?"yyyy-MM-dd HH:mm:ss":arguments[1];return n=new Date(n),r=t.toString(r),t.isNaN(+n)||!Gt.test(r)?"":r.replace(Gt,function(){for(var r=arguments.length,e=Array(r),i=0;r>i;i++)e[i]=arguments[i];var u=[];return t.each(S.call(e,1,-2),function(r,e){var i=void 0;r&&(e%2===0?(i=n[Qt[e/2]](),"MM"===r&&i++,"yyyy"!==r&&(i=t.padStart(i,2,"0")),u.push(i)):u.push(r))}),u.join("")})}}),t.each(t,function(n,r){t.prototype[r]=t.isFunction(n)?function(){for(var n=arguments.length,e=Array(n),i=0;n>i;i++)e[i]=arguments[i];return this.__value__.push(t[r].apply(t,[t.last(this.__value__)].concat(e))),this}:n}),t.assign(t.prototype,{end:function(){return this.__value__.pop(),this},val:function(){return t.last(this.__value__)},toLog:function(){return t.log(this.val()),this}}),function(n){var t=/(\\u\w{4})/g;n.stringify=function(n){null==n&&(n="");var r=nt(n);return r?r.replace(t,function(n){return new Function('return "'+n+'"')()}):""}}(JSON),lt()}("undefined"==typeof window?global:window);