{"version":3,"sources":["webpack:///webpack/bootstrap 2e8a12564fde4c987cbd?8a83**************","webpack:///external \"jQuery\"?0cb8****","webpack:///external \"limit\"?1d95****","webpack:///./src/js/bus/html/limitProp/main.js","webpack:///./src/js/common/router.js","webpack:///./src/js/common/class.js"],"names":["$","require","limit","Router","Class","A","B","C","c","D","create","d","E","extend","e","console","log","F","f","findAllPro","obj","rtv","pro","constructor","prototype","Object","keysSuper","each","val","__proto__","key","WIN","window","REX_HASH","config","me","routerMap","eventUid","getUid","add","addPathForKey","bindHashChange","cb","isDefined","war","arg","hashParse","parseHash","needHash","isFunction","parseString","search","unParseString","hash","location","toString","on","hashBack","trigger","charAt","off","hashMatch","match","module","exports","emptyArr","K","k","Rex","noName","mix","CUR","TAR","NEEDPROP","CALLBACK","i","hasOwnProperty","createPro","PRO","SUB","PAR","superClass","implement","CLS","PROP","replace","a","subClass","init","apply","arguments","instanceOf","OBJ","Statics","ARR","concat","item","shift","Implements","prop"],"mappings":"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","file":"js/bus/html/limitProp/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2e8a12564fde4c987cbd","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 31\n// module chunks = 3 4 11 13 14 17 19 21 34 35 38","module.exports = limit;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"limit\"\n// module id = 32\n// module chunks = 3 4 5 11 14 15 17 18 19 21 22 27 29 33 34 35 36 37 38","\"use strict\";\n\n// 依赖\nconst $ = require('$');\nconst limit = require('limit');\nconst Router = require('common/router');\nconst Class = require('common/class');\n\n\nclass A {\n\tclassName: 'A'\n\ta(){}\n}\n\nclass B extends A {\n\tclassName: 'B'\n\tb(){}\n}\n\nclass C extends B {\n\tclassName: 'C'\n\tc(){}\n}\n\n\nlet c = new C();\n\nlet D = Class.create({\n\td: function(){}\n});\n\nlet E = D.extend({\n\te: function(){console.log('e')}\n});\n\nlet F = E.extend({\n\tf: function(){}\n});\n\nlet f = new F();\n\n// console.log(f.constructor === F);\n// console.log(E === f.__proto__.constructor);\n// console.log(f.constructor.prototype.__proto__.constructor === E);\n// console.log(f.constructor.prototype.constructor === F);\n// console.log( f, f.__proto__);\n// console.log( Object.getPrototypeOf+'' );\n// console.log(f.constructor.prototype.__proto__ === E.prototype);\n\n\nfunction findAllPro(obj){\n\tlet rtv = {};\n\tlet pro = obj.constructor.prototype;\n\twhile(pro){\n\t\t// 如果到最底层的Object跳出\n\t\tif( pro.constructor === Object ){\n\t\t\tbreak;\n\t\t};\n\t\tlimit(pro)\n\t\t\t.keysSuper()\n\t\t\t.each((val) => {\n\t\t\t\t// 隔离__proto__\n\t\t\t\tif( val !== '__proto__' && !rtv[val] ){\n\t\t\t\t\trtv[val] = pro[val];\n\t\t\t\t};\n\t\t\t});\n\t\tpro = pro.__proto__;\n\t};\n\treturn rtv;\n};\n\nlimit.each( findAllPro(f), (val, key) => {\n\tconsole.log( key, val+'' );\n} );\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/js/bus/html/limitProp/main.js","\"use strict\";\r\n\r\n// 变量\r\nconst WIN = $(window);\r\nconst REX_HASH = /^#([^?]*)(?:\\?(.*))?/;\r\n\r\n// 类\r\nclass Router {\r\n\tconstructor(config){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap = {};\r\n\t\tme.eventUid = `hashchange.router${limit.getUid()}`;\r\n\t\tlimit.each(config, (val, key) => {\r\n\t\t\tme.add( me.addPathForKey(key), val );\r\n\t\t});\r\n\t\tme.bindHashChange();\r\n\t}\r\n\tadd(key, cb){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tif( limit.isDefined(routerMap[key]) ){\r\n\t\t\tlimit.war(`${key} is defined before;`);\r\n\t\t};\r\n\t\trouterMap[key] = limit.cb(cb);\r\n\t\treturn me;\r\n\t}\r\n\tremove(key){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tdelete routerMap[key];\r\n\t\treturn me;\r\n\t}\r\n\tsetSearch(arg){\r\n\t\tlet me = this;\r\n\t\tlet hashParse = me.parseHash();\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tneedHash = limit.cb(arg)( limit.parseString(hashParse.search) );\r\n\t\t};\r\n\t\tif( needHash = limit.unParseString(needHash) ){\r\n\t\t\tneedHash = `${hashParse.hash}?${needHash}`;\r\n\t\t}else{\r\n\t\t\tneedHash = `${hashParse.hash}`;\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tsetHash(arg){\r\n\t\tlet me = this;\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tneedHash = limit.toString( limit.cb(arg)( hashParse.hash, limit.parseString(hashParse.search) ) );\r\n\t\t}else{\r\n\t\t\tneedHash = limit.toString(arg);\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tbindHashChange(){\r\n\t\tlet me = this;\r\n\t\tWIN.on(me.eventUid, (e) => {\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tlet hashBack;\r\n\t\t\tif( hashParse && (hashBack = me.routerMap[me.addPathForKey(hashParse.hash)]) ){\r\n\t\t\t\thashBack( limit.parseString(hashParse.search) );\r\n\t\t\t};\r\n\t\t});\r\n\t\tWIN.trigger(me.eventUid);\r\n\t}\r\n\taddPathForKey(key){\r\n\t\tif(key.charAt(0) !== '/'){\r\n\t\t\treturn `/${key}`;\r\n\t\t}else{\r\n\t\t\treturn key;\r\n\t\t};\r\n\t}\r\n\tdestroy(){\r\n\t\tlet me = this;\r\n\t\tWIN.off(me.eventUid);\r\n\t}\r\n\tparseHash(){\r\n\t\tlet me = this;\r\n\t\tlet hash = location.hash;\r\n\t\tlet hashMatch = hash.match(REX_HASH);\r\n\t\tif(hashMatch){\r\n\t\t\tlet hash = hashMatch[1];\r\n\t\t\tlet search = hashMatch[2];\r\n\t\t\treturn {hash, search};\r\n\t\t}else{\r\n\t\t\treturn {hash: ''};\r\n\t\t};\r\n\t}\r\n\tstatic creatRouter(config){\r\n\t\treturn new Router(config);\r\n\t}\r\n}\r\n\r\n// 接口\r\nmodule.exports = Router;\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/router.js","\"use strict\";\r\n/**\r\n * 2014.09.15\r\n * 类的初始创建和继承。\r\n * version: 1.0.1\r\n * 2015.02.27\r\n * 增加属性的方法: Implements, Statics\r\n * 2015.04.30\r\n * 修改了mix方法，在接口继承的时候如果要继承的类也是有继承关系的就需要把所有的属性和方法都继承过来\r\n * 2015.06.09\r\n * 修改了Statics方法可以传入多个\r\n * 2015.06.15\r\n * 对Statics也拥有继承特性，对于静态的属性，extend superClass 是不可修改的\r\n */\r\ndefine(function(require, exports) {\r\n\r\n\t//初始化变量\r\n\tvar Class = {},\r\n\t\temptyArr = [],\r\n\t\tK = function (k){return k},\r\n\t\tRex = /\\w+/g;\r\n\r\n\t/**\r\n\t * [默认是过滤 extend superClass的]\r\n\t * @param  {[string]} key [名称]\r\n\t * @return {[boolean]}     [是否为extend或者superClass]\r\n\t */\r\n\tfunction noName(key){\r\n\t\treturn key !== 'extend' && key !== 'superClass';\r\n\t}\r\n\r\n\t/**\r\n\t * [mix 混合方法]\r\n\t * @param  {Object} CUR [被混合的对象]\r\n\t * @param  {Object} TAR [混合源]\r\n\t * @return {Object} CUR\t[被混合的对象]\r\n\t */\r\n\tfunction mix(CUR, TAR, NEEDPROP, CALLBACK) {\r\n\t\tCALLBACK = typeof CALLBACK === 'function' ? CALLBACK : K;\r\n\t\tfor (var i in TAR) {\r\n\t\t\tif ( (TAR.hasOwnProperty(i) || NEEDPROP) && CALLBACK(i) ) {\r\n\t\t\t\tCUR[i] = TAR[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn CUR;\r\n\t}\r\n\r\n\t//空类\r\n\tfunction E() {}\r\n\r\n\t/**\r\n\t * [createPro 原型链对象的创建]\r\n\t * @return {Class}\t[源类]\r\n\t * @return {Object} [对象]\r\n\t */\r\n\tfunction createPro(PRO) {\r\n\t\t// var create = Object.create;\r\n\t\t// //新的API\r\n\t\t// if (create) {\r\n\t\t// \treturn create(PRO);\r\n\t\t// } else if (PRO.__proto__) {\r\n\t\t// \treturn {\r\n\t\t// \t\t__proto__: PRO\r\n\t\t// \t}\r\n\t\t// } else {\r\n\t\t\tE.prototype = PRO;\r\n\t\t\tvar pro = new E();\r\n\t\t\tpro.__proto__ = PRO;\r\n\t\t\treturn pro;\r\n\t\t// }\r\n\t}\r\n\r\n\t/**\r\n\t * [extend 继承方法]\r\n\t * @param  {Class} PAR \t[子类]\r\n\t * @param  {Class} SUB \t[父类]\r\n\t * @return {Class} SUB\t[子类]\r\n\t */\r\n\tfunction extend(SUB, PAR) {\r\n\t\t//继承\r\n\t\tSUB.prototype = createPro(PAR.prototype);\r\n\t\t//构造器\r\n\t\tSUB.prototype.constructor = SUB;\r\n\t\t//超类\r\n\t\tSUB.superClass = PAR.prototype;\r\n\t\treturn SUB;\r\n\t}\r\n\r\n\t/**\r\n\t * [implement 接口继承？]\r\n\t * @param  {Class}\tCLS  [源类]\r\n\t * @param  {Object}\tPROP [属性]\r\n\t * @return {Class}\tCLS  [源类]\r\n\t */\r\n\tfunction implement(CLS, PROP) {\r\n\t\t//对于Implements, Statics的特殊处理\r\n\t\t'Implements,Statics'.replace(Rex, function(a){\r\n\t\t\t//如果对象存在，不存在的情况是 extend 的时候会直接create();\r\n\t\t\tif(PROP){\r\n\t\t\t\t//如果没有属性的话就初始话一个空的数组，这个是为了做统一，保证全部运行\r\n\t\t\t\t!PROP[a] && (PROP[a] = emptyArr);\r\n\t\t\t\t//确保是静态属性\r\n\t\t\t\tif(PROP.hasOwnProperty(a)){\r\n\t\t\t\t\tClass[a](CLS, PROP[a]);\r\n\t\t\t\t}\r\n\t\t\t\tdelete PROP[a];\r\n\t\t\t}\r\n\t\t});\r\n\t\t//混合\r\n\t\tmix(CLS.prototype, PROP);\r\n\t\treturn CLS;\r\n\t}\r\n\r\n\t//类的创建\r\n\tClass.create = function(PROP) {\r\n\t\t//源类\r\n\t\tfunction subClass() {\r\n\t\t\tvar init = this.init;\r\n\t\t\treturn init && init.apply(this, arguments);\r\n\t\t}\r\n\t\t//接口继承\r\n\t\timplement(subClass, PROP);\r\n\t\t//创建的时候把构造器指向源类\r\n\t\tsubClass.prototype.constructor = subClass;\r\n\t\t//继承方法\r\n\t\tsubClass.extend = function(PROP) {\r\n\t\t\treturn Class.extend(subClass, PROP);\r\n\t\t}\r\n\t\treturn subClass;\r\n\t}\r\n\t//类的继承\r\n\tClass.extend = function(PAR, PROP) {\r\n\t\t//参数控制\r\n\t\tif (typeof PAR !== 'function') {\r\n\t\t\tthrow 'Class extend error!! parent class need a function';\r\n\t\t} else {\r\n\t\t\treturn implement(extend(Class.create(), PAR), PROP);\r\n\t\t}\r\n\t}\r\n\t//类的实例化判断，修复的instanceof\r\n\tClass.instanceOf = function(OBJ, CLS) {\r\n\t\treturn OBJ instanceof CLS && OBJ.constructor === CLS;\r\n\t}\r\n\t//静态属性\r\n\tClass.Statics = function(CLS, ARR){\r\n\t\tARR = [].concat(ARR);\r\n\t\tvar item;\r\n\t\t//如果存在父级，对于父级方法属性的继承\r\n\t\tCLS.superClass && mix(CLS, CLS.superClass.constructor, false, noName);\r\n\t\t//属性的继承\r\n\t\twhile(item = ARR.shift()){\r\n\t\t\tmix(CLS, item, false, noName);\r\n\t\t}\r\n\t}\r\n\t//接口\r\n\tClass.Implements = function(CLS, ARR){\r\n\t\tvar item,\r\n\t\t\tprop = CLS.prototype;\r\n\t\tARR = [].concat(ARR);\r\n\t\twhile(item = ARR.shift()){\r\n\t\t\t//接口继承，如果是类的话就用原型属性，否者就用本身，但是会继承所有方法\r\n\t\t\tmix(prop, item.prototype || item, true);\r\n\t\t}\r\n\t}\r\n\r\n\treturn Class;\r\n\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/js/common/class.js"],"sourceRoot":""}