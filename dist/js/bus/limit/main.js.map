{"version":3,"sources":["webpack:///webpack/bootstrap bc6094f7e71eaef654e3","webpack:///./src/js/bus/limit/main.js","webpack:///external \"jQuery\"","webpack:///external \"limit\"","webpack:///./src/js/common/router.js"],"names":["$","require","limit","Router","isUndefined","toLog","WIN","window","REX_HASH","config","me","routerMap","eventUid","getUid","each","val","key","add","addPathForKey","bindHashChange","cb","isDefined","arg","hashParse","parseHash","needHash","isFunction","parseString","search","unParseString","hash","location","toString","on","e","hashBack","trigger","charAt","off","hashMatch","match","module","exports"],"mappings":"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","file":"js/bus/limit/main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap bc6094f7e71eaef654e3\n **/","\"use strict\";\n\n// 依赖\nconst $ = require('$');\nconst limit = require('limit');\nconst Router = require('common/router');\n\n\nlimit().isUndefined().toLog();\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/bus/limit/main.js\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 2\n ** module chunks = 0 1 2\n **/","module.exports = limit;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"limit\"\n ** module id = 3\n ** module chunks = 0 1 2\n **/","\"use strict\";\r\n\r\n// 依赖\r\nconst $ = require('$');\r\nconst limit = require('limit');\r\n\r\n// 变量\r\nconst WIN = $(window);\r\nconst REX_HASH = /^#([^?]*)(?:\\?(.*))?/;\r\n\r\n// 类\r\nclass Router {\r\n\tconstructor(config){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap = {};\r\n\t\tme.eventUid = `hashchange.router${limit.getUid()}`;\r\n\t\tlimit.each(config, (val, key) => {\r\n\t\t\tme.add( me.addPathForKey(key), val );\r\n\t\t});\r\n\t\tme.bindHashChange();\r\n\t}\r\n\tadd(key, cb){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tif( limit.isDefined(routerMap[key]) ){\r\n\t\t\tlimit['!!!'](`${key} is defined before;`);\r\n\t\t};\r\n\t\trouterMap[key] = limit.cb(cb);\r\n\t\treturn me;\r\n\t}\r\n\tremove(key){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tdelete routerMap[key];\r\n\t\treturn me;\r\n\t}\r\n\tsetSearch(arg){\r\n\t\tlet me = this;\r\n\t\tlet hashParse = me.parseHash();\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tneedHash = limit.cb(arg)( limit.parseString(hashParse.search) );\r\n\t\t};\r\n\t\tif( needHash = limit.unParseString(needHash) ){\r\n\t\t\tneedHash = `${hashParse.hash}?${needHash}`;\r\n\t\t}else{\r\n\t\t\tneedHash = `${hashParse.hash}`;\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tsetHash(arg){\r\n\t\tlet me = this;\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tneedHash = limit.toString( limit.cb(arg)( hashParse.hash, limit.parseString(hashParse.search) ) );\r\n\t\t}else{\r\n\t\t\tneedHash = limit.toString(arg);\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tbindHashChange(){\r\n\t\tlet me = this;\r\n\t\tWIN.on(me.eventUid, (e) => {\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tlet hashBack;\r\n\t\t\tif( hashParse && (hashBack = me.routerMap[me.addPathForKey(hashParse.hash)]) ){\r\n\t\t\t\thashBack( limit.parseString(hashParse.search) );\r\n\t\t\t};\r\n\t\t});\r\n\t\tWIN.trigger(me.eventUid);\r\n\t}\r\n\taddPathForKey(key){\r\n\t\tif(key.charAt(0) !== '/'){\r\n\t\t\treturn `/${key}`;\r\n\t\t}else{\r\n\t\t\treturn key;\r\n\t\t};\r\n\t}\r\n\tdestroy(){\r\n\t\tlet me = this;\r\n\t\tWIN.off(me.eventUid);\r\n\t}\r\n\tparseHash(){\r\n\t\tlet me = this;\r\n\t\tlet hash = location.hash;\r\n\t\tlet hashMatch = hash.match(REX_HASH);\r\n\t\tif(hashMatch){\r\n\t\t\tlet hash = hashMatch[1];\r\n\t\t\tlet search = hashMatch[2];\r\n\t\t\treturn {hash, search};\r\n\t\t}else{\r\n\t\t\treturn {hash: ''};\r\n\t\t};\r\n\t}\r\n\tstatic creatRouter(config){\r\n\t\treturn new Router(config);\r\n\t}\r\n}\r\n\r\n// 接口\r\nmodule.exports = Router;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/common/router.js\n **/"],"sourceRoot":""}