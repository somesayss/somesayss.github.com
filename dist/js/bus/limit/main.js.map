{"version":3,"sources":["webpack:///js/bus/limit/main.js","webpack:///webpack/bootstrap 30681e4ea404be997ac4","webpack:///./src/js/bus/limit/main.js","webpack:///external \"jQuery\"","webpack:///external \"limit\"","webpack:///./src/js/common/router.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","limit","isUndefined","toLog","jQuery","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$","WIN","window","REX_HASH","Router","config","this","me","routerMap","eventUid","getUid","each","val","add","addPathForKey","bindHashChange","value","cb","isDefined","arg","hashParse","parseHash","needHash","isFunction","parseString","search","unParseString","hash","location","toString","on","e","hashBack","trigger","charAt","off","hashMatch","match"],"mappings":"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","file":"js/bus/limit/main.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t// 依赖\n\t\n\tvar $ = __webpack_require__(2);\n\tvar limit = __webpack_require__(3);\n\tvar Router = __webpack_require__(4);\n\t\n\tlimit().isUndefined().toLog();\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = jQuery;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = limit;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\t// 依赖\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar $ = __webpack_require__(2);\n\tvar limit = __webpack_require__(3);\n\t\n\t// 变量\n\tvar WIN = $(window);\n\tvar REX_HASH = /^#([^?]*)(?:\\?(.*))?/;\n\t\n\t// 类\n\t\n\tvar Router = function () {\n\t\tfunction Router(config) {\n\t\t\t_classCallCheck(this, Router);\n\t\n\t\t\tvar me = this;\n\t\t\tvar routerMap = me.routerMap = {};\n\t\t\tme.eventUid = 'hashchange.router' + limit.getUid();\n\t\t\tlimit.each(config, function (val, key) {\n\t\t\t\tme.add(me.addPathForKey(key), val);\n\t\t\t});\n\t\t\tme.bindHashChange();\n\t\t}\n\t\n\t\t_createClass(Router, [{\n\t\t\tkey: 'add',\n\t\t\tvalue: function add(key, cb) {\n\t\t\t\tvar me = this;\n\t\t\t\tvar routerMap = me.routerMap;\n\t\t\t\tif (limit.isDefined(routerMap[key])) {\n\t\t\t\t\tlimit['!!!'](key + ' is defined before;');\n\t\t\t\t};\n\t\t\t\trouterMap[key] = limit.cb(cb);\n\t\t\t\treturn me;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'remove',\n\t\t\tvalue: function remove(key) {\n\t\t\t\tvar me = this;\n\t\t\t\tvar routerMap = me.routerMap;\n\t\t\t\tdelete routerMap[key];\n\t\t\t\treturn me;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setSearch',\n\t\t\tvalue: function setSearch(arg) {\n\t\t\t\tvar me = this;\n\t\t\t\tvar hashParse = me.parseHash();\n\t\t\t\tvar needHash = void 0;\n\t\t\t\tif (limit.isFunction(arg)) {\n\t\t\t\t\tneedHash = limit.cb(arg)(limit.parseString(hashParse.search));\n\t\t\t\t};\n\t\t\t\tif (needHash = limit.unParseString(needHash)) {\n\t\t\t\t\tneedHash = hashParse.hash + '?' + needHash;\n\t\t\t\t} else {\n\t\t\t\t\tneedHash = '' + hashParse.hash;\n\t\t\t\t};\n\t\t\t\tlocation.hash = needHash;\n\t\t\t\treturn me;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setHash',\n\t\t\tvalue: function setHash(arg) {\n\t\t\t\tvar me = this;\n\t\t\t\tvar needHash = void 0;\n\t\t\t\tif (limit.isFunction(arg)) {\n\t\t\t\t\tvar hashParse = me.parseHash();\n\t\t\t\t\tneedHash = limit.toString(limit.cb(arg)(hashParse.hash, limit.parseString(hashParse.search)));\n\t\t\t\t} else {\n\t\t\t\t\tneedHash = limit.toString(arg);\n\t\t\t\t};\n\t\t\t\tlocation.hash = needHash;\n\t\t\t\treturn me;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'bindHashChange',\n\t\t\tvalue: function bindHashChange() {\n\t\t\t\tvar me = this;\n\t\t\t\tWIN.on(me.eventUid, function (e) {\n\t\t\t\t\tvar hashParse = me.parseHash();\n\t\t\t\t\tvar hashBack = void 0;\n\t\t\t\t\tif (hashParse && (hashBack = me.routerMap[me.addPathForKey(hashParse.hash)])) {\n\t\t\t\t\t\thashBack(limit.parseString(hashParse.search));\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\tWIN.trigger(me.eventUid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'addPathForKey',\n\t\t\tvalue: function addPathForKey(key) {\n\t\t\t\tif (key.charAt(0) !== '/') {\n\t\t\t\t\treturn '/' + key;\n\t\t\t\t} else {\n\t\t\t\t\treturn key;\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'destroy',\n\t\t\tvalue: function destroy() {\n\t\t\t\tvar me = this;\n\t\t\t\tWIN.off(me.eventUid);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'parseHash',\n\t\t\tvalue: function parseHash() {\n\t\t\t\tvar me = this;\n\t\t\t\tvar hash = location.hash;\n\t\t\t\tvar hashMatch = hash.match(REX_HASH);\n\t\t\t\tif (hashMatch) {\n\t\t\t\t\tvar _hash = hashMatch[1];\n\t\t\t\t\tvar search = hashMatch[2];\n\t\t\t\t\treturn { hash: _hash, search: search };\n\t\t\t\t} else {\n\t\t\t\t\treturn { hash: '' };\n\t\t\t\t};\n\t\t\t}\n\t\t}], [{\n\t\t\tkey: 'creatRouter',\n\t\t\tvalue: function creatRouter(config) {\n\t\t\t\treturn new Router(config);\n\t\t\t}\n\t\t}]);\n\t\n\t\treturn Router;\n\t}();\n\t\n\t// 接口\n\t\n\t\n\tmodule.exports = Router;\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** js/bus/limit/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 30681e4ea404be997ac4\n **/","\"use strict\";\n\n// 依赖\nconst $ = require('$');\nconst limit = require('limit');\nconst Router = require('common/router');\n\n\nlimit().isUndefined().toLog();\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/bus/limit/main.js\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 2\n ** module chunks = 0 1 2\n **/","module.exports = limit;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"limit\"\n ** module id = 3\n ** module chunks = 0 1 2\n **/","\"use strict\";\r\n\r\n// 依赖\r\nconst $ = require('$');\r\nconst limit = require('limit');\r\n\r\n// 变量\r\nconst WIN = $(window);\r\nconst REX_HASH = /^#([^?]*)(?:\\?(.*))?/;\r\n\r\n// 类\r\nclass Router {\r\n\tconstructor(config){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap = {};\r\n\t\tme.eventUid = `hashchange.router${limit.getUid()}`;\r\n\t\tlimit.each(config, (val, key) => {\r\n\t\t\tme.add( me.addPathForKey(key), val );\r\n\t\t});\r\n\t\tme.bindHashChange();\r\n\t}\r\n\tadd(key, cb){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tif( limit.isDefined(routerMap[key]) ){\r\n\t\t\tlimit['!!!'](`${key} is defined before;`);\r\n\t\t};\r\n\t\trouterMap[key] = limit.cb(cb);\r\n\t\treturn me;\r\n\t}\r\n\tremove(key){\r\n\t\tlet me = this;\r\n\t\tlet\trouterMap = me.routerMap;\r\n\t\tdelete routerMap[key];\r\n\t\treturn me;\r\n\t}\r\n\tsetSearch(arg){\r\n\t\tlet me = this;\r\n\t\tlet hashParse = me.parseHash();\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tneedHash = limit.cb(arg)( limit.parseString(hashParse.search) );\r\n\t\t};\r\n\t\tif( needHash = limit.unParseString(needHash) ){\r\n\t\t\tneedHash = `${hashParse.hash}?${needHash}`;\r\n\t\t}else{\r\n\t\t\tneedHash = `${hashParse.hash}`;\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tsetHash(arg){\r\n\t\tlet me = this;\r\n\t\tlet needHash;\r\n\t\tif( limit.isFunction(arg) ){\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tneedHash = limit.toString( limit.cb(arg)( hashParse.hash, limit.parseString(hashParse.search) ) );\r\n\t\t}else{\r\n\t\t\tneedHash = limit.toString(arg);\r\n\t\t};\r\n\t\tlocation.hash = needHash;\r\n\t\treturn me;\r\n\t}\r\n\tbindHashChange(){\r\n\t\tlet me = this;\r\n\t\tWIN.on(me.eventUid, (e) => {\r\n\t\t\tlet hashParse = me.parseHash();\r\n\t\t\tlet hashBack;\r\n\t\t\tif( hashParse && (hashBack = me.routerMap[me.addPathForKey(hashParse.hash)]) ){\r\n\t\t\t\thashBack( limit.parseString(hashParse.search) );\r\n\t\t\t};\r\n\t\t});\r\n\t\tWIN.trigger(me.eventUid);\r\n\t}\r\n\taddPathForKey(key){\r\n\t\tif(key.charAt(0) !== '/'){\r\n\t\t\treturn `/${key}`;\r\n\t\t}else{\r\n\t\t\treturn key;\r\n\t\t};\r\n\t}\r\n\tdestroy(){\r\n\t\tlet me = this;\r\n\t\tWIN.off(me.eventUid);\r\n\t}\r\n\tparseHash(){\r\n\t\tlet me = this;\r\n\t\tlet hash = location.hash;\r\n\t\tlet hashMatch = hash.match(REX_HASH);\r\n\t\tif(hashMatch){\r\n\t\t\tlet hash = hashMatch[1];\r\n\t\t\tlet search = hashMatch[2];\r\n\t\t\treturn {hash, search};\r\n\t\t}else{\r\n\t\t\treturn {hash: ''};\r\n\t\t};\r\n\t}\r\n\tstatic creatRouter(config){\r\n\t\treturn new Router(config);\r\n\t}\r\n}\r\n\r\n// 接口\r\nmodule.exports = Router;\n\n\n/** WEBPACK FOOTER **\n ** ./src/js/common/router.js\n **/"],"sourceRoot":""}