{
  "name": "htmlclean",
  "version": "2.2.3",
  "title": "htmlclean",
  "description": "Simple and lightweight cleaner that just removes whitespaces, comments, etc. to minify HTML. This differs from others in that this removes whitespaces, line-breaks, etc. as much as possible.",
  "keywords": [
    "html",
    "clean",
    "whitespace",
    "line break",
    "comment",
    "minify",
    "remove space",
    "lightweight"
  ],
  "main": "./lib/htmlclean.js",
  "engines": {
    "node": ">= 0.8.0"
  },
  "homepage": "https://github.com/anseki/htmlclean",
  "repository": {
    "type": "git",
    "url": "git://github.com/anseki/htmlclean.git"
  },
  "bugs": {
    "url": "https://github.com/anseki/htmlclean/issues"
  },
  "licenses": "MIT",
  "author": {
    "name": "anseki",
    "url": "https://github.com/anseki"
  },
  "readme": "# htmlclean\n\nSimple and lightweight cleaner that just removes whitespaces, comments, etc. to minify HTML.  \nThis differs from others in that this removes whitespaces, line-breaks, etc. as much as possible.\n\n[HtmlCompressor](http://code.google.com/p/htmlcompressor/), [HTMLMinifier](https://github.com/kangax/html-minifier) and others are better choice if you want to control details of editing.  \nThose configuring are a little pain in the neck for me. And the results was not what I need. So, I wrote htmlclean. This removes unneeded whitespaces, line-breaks, comments, etc. That's all.\n\n## Removing\nhtmlclean removes the following texts.\n\n+ The leading whitespaces, tabs and line-breaks, and the trailing whitespaces, tabs and line-breaks.\n+ The unneeded whitespaces, tabs and line-breaks between HTML tags.\n+ The more than two whitespaces, tabs and line-breaks (suppressed to one space).\n+ HTML comments.\n\nThe more than two whitespaces (even if those are divided by HTML tags) in a line are suppressed.\n\n**Example:**\n\nBefore\n\n```html\n<p>The <strong> clean <span> <em> HTML is here. </em> </span> </strong> </p>\n```\n\nAfter\n\n```html\n<p>The <strong>clean <span><em>HTML is here.</em></span></strong></p>\n```\n\nThe whitespace that was right side of `<strong>` was removed, and the left side was kept.  \nThe both side whitespaces of `<em>` were removed.\n\n## Protecting\nThe following texts are protected (excluded from removing).\n\n+ The texts in `textarea`, `script` and `style` elements, and text nodes in `pre` elements.\n+ The quoted texts in tag attribute.\n+ The texts in SSI tags (PHP, JSP, ASP/ASP.NET and Apache SSI).\n+ IE conditional comments. e.g. `<!--[if lt IE 7]>`\n+ The texts between `<!--[htmlclean-protect]-->` and `<!--[/htmlclean-protect]-->`.\n+ The texts that is matched by `protect` option (see \"Options\").\n\n## Installation\n\n```\nnpm install htmlclean\n```\n\n## Usage\n\n```js\ncleanHtml = htmlclean(sourceHtml[, options])\n```\n\n`require('htmlclean')` returns a Function. This Function accepts source HTML, and returns clean HTML. If you want, you can specify options to second argument (see \"Options\").\n\n```js\nvar htmlclean = require('htmlclean');\nhtml = htmlclean(html);\n\n// Or\nhtml = require('htmlclean')(html);\n```\n\n### Options\nYou can specify `options` Object to second argument. This Object can have following properties.\n\n+ <strong>`protect` Type: RegExp or Array</strong>  \nThe texts which are matched to this RegExp are protected in addition to above \"Protecting\" list. The multiple RegExps can be specified via Array.\n\n+ <strong>`unprotect` Type: RegExp or Array</strong>  \nThe texts which are matched to this RegExp are cleaned even if the text is included in above \"Protecting\" list. The multiple RegExps can be specified via Array.  \nFor example, HTML as template in `<script type=\"text/x-handlebars-template\">` is cleaned via following.\n\n```js\nhtml = htmlclean(html, {\n  unprotect: /<script [^>]*\\btype=\"text\\/x-handlebars-template\"[\\s\\S]+?<\\/script>/ig\n});\n```\n\nThe `x-handlebars-template` in `type` attribute above is case of using the Template Framework [Handlebars](http://handlebarsjs.com/). e.g. [AngularJS](https://angularjs.org/) requires `ng-template` instead of it.\n\n*NOTE:* The RegExp has to match to text which is not a part of protected text. For example, the RegExp matches `color: red;` in `<style>` element, but this is not cleaned because all texts in the `<style>` element are protected. (`color: red;` is a part of protected text.) The RegExp has to match to text which is all of `<style>` element like `/<style[\\s\\S]+?<\\/style>/`.\n\n+ <strong>`edit` Type: Function</strong>  \nThis Function more edits HTML.  \nThe protected texts are hidden from HTML, and HTML is passed to this Function. Therefore, this Function doesn't break protected texts. The HTML which returned from this Function is restored.  \n*NOTE:* Markers `\\fID\\f` (`\\f` is \"form feed\" `\\x0C` code, `ID` is number) are inserted to HTML instead of protected texts. This Function can remove these markers, but can't add new markers. (Invalid markers will be just removed.)\n\n## Example\n\nSee the source HTML file and results HTML files in the `sample` directory.\n\n```js\nvar htmlclean = require('htmlclean'),\n  fs = require('fs'),\n  htmlBefore = fs.readFileSync('./before.html', {encoding: 'utf8'});\n\nvar htmlAfter1 = htmlclean(htmlBefore);\nfs.writeFileSync('./after1.html', htmlAfter1);\n\nvar htmlAfter2 = htmlclean(htmlBefore, {\n  protect: /<\\!--%fooTemplate\\b.*?%-->/g,\n  unprotect: /<script [^>]*\\btype=\"text\\/x-handlebars-template\"[\\s\\S]+?<\\/script>/ig,\n  edit: function(html) { return html.replace(/\\begg(s?)\\b/ig, 'omelet$1'); }\n});\nfs.writeFileSync('./after2.html', htmlAfter2);\n```\n\n## Note\n\n### Malformed Nested Tags, and Close Tags in Script\n\nhtmlclean can't parse malformed nested tags like `<p>foo<pre>bar</p>baz</pre>` precisely. And close tags in script like `<script>var foo = '</script>';</script>` too. Or, `?>` in PHP code, etc.  \nSome language parsers also mistake, then those recommend us to write code like `'<' + '/script>'`. This is better even if htmlclean is not used.\n\n### SSI Tags in HTML Comments\n\nhtmlclean removes HTML comments that include SSI tag like `<!-- Info for admin - Foo:<?= expression ?> -->`. I think it's no problem because htmlclean is used to minify HTML. If that SSI tag includes important code for logic, use a `protect` option, or `<!--[htmlclean-protect]-->` and `<!--[/htmlclean-protect]-->`.\n\n## See Also\n\n* [Grunt](http://gruntjs.com/) plugin: [grunt-htmlclean](https://github.com/anseki/grunt-htmlclean)\n* [gulp](http://gulpjs.com/) plugin: [gulp-htmlclean](https://github.com/anseki/gulp-htmlclean)\n\n## History\n * 2014-09-18\t\t\tv2.2.2\t\t\tFix: The tabs etc. in tags are remained.\n * 2014-09-18\t\t\tv2.2.1\t\t\tAdd: Check the whitespaces in tags.\n * 2014-08-30\t\t\tv2.2.0\t\t\tAdd more SSI tags (PHP, etc.) to protection.\n * 2014-06-15\t\t\tv2.1.1\t\t\tRestoration accepts nested saved texts.\n * 2014-06-15\t\t\tv2.1.0\t\t\tAdd `unprotect` option.\n * 2014-06-14\t\t\tv2.0.2\t\t\tAdd `<!-->`, `<!--<![` and others to protected texts.\n * 2014-06-11\t\t\tv2.0.1\t\t\tFix: Comment tags that include other tags are not removed.\n * 2013-11-06\t\t\tv2.0.0\t\t\tChange logic of handling whitespaces and others.\n * 2013-08-27\t\t\tv0.1.0\t\t\tInitial release.\n",
  "readmeFilename": "README.md",
  "_id": "htmlclean@2.2.3",
  "_shasum": "3f3c55a0f348ce6a46ea05374042ca47021de77c",
  "_from": "htmlclean@~2.2.3",
  "_resolved": "https://registry.npmjs.org/htmlclean/-/htmlclean-2.2.3.tgz"
}
